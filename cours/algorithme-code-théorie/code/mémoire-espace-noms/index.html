<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Mémoire et espace de noms</title>

    <link href="/cours_informatique/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
    <link href="/cours_informatique/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

    <link href="/cours_informatique/assets/stylesheets/main.css" rel="stylesheet">

  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };

      function goTop() {
        window.scrollTo({top: 0});
      }
      function goBottom() {
        window.scrollTo({top: document.body.scrollHeight});
      }
    </script>
    <script type="text/javascript" id="MathJax-script" src="/cours_informatique/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/cours_informatique/">Home</a>
        </div>

        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <a class="mx-2" href="/cours_informatique/about">About</a>
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </header>

    <main class="max-w-[1200px] mx-auto px-4">
      
<article>

  <h1>Mémoire et espace de noms</h1>
  <div>
    

    
  </div>

  

    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a class="interne" href="/cours_informatique/cours/">Cours</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/algorithme-code-théorie/">Algorithme, code et théorie</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/algorithme-code-théorie/code/">Code</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/algorithme-code-théorie/code/mémoire-espace-noms/">Mémoire et espace de noms</a>

</div>
</div>


    
      
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-pink-500 bg-pink-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-pink-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
</svg>
<div class="pl-8  mb-2 mr-8">

<b>Prérequis :</b>

</div><div class="pl-8 mr-8">


      <ul>
              
              <li>
                <a class="interne" href="/cours_informatique/cours/algorithme-code-théorie/code/coder/">Coder</a>
              </li></ul>
      

</div>
</div>

    
  

  <!-- début résumé -->
<p>On montre comment on peut gérer les variables dans un programme, et l'utilité des espaces de noms (en prenant l'exemple de python) pour le faire.</p>
<!-- end résumé -->
<p>Nous ne rentrerons pas dans les détails, la gestion de la mémoire est quelque chose de compliqué. Nous nous contenterons d'en présenter les caractéristiques fondamentales et les conséquences que cela implique sur la gestion des variables et des objets.</p>
<h2>La mémoire</h2>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-red-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Les explications ci-après sont <strong>très simplifiées</strong>. Nous nous contentons d'expliquer les principes pour que vous compreniez les enjeux de la gestion de la mémoire et l'intérêt qu'il y a à travailler par références lorsque l'on code avec des objets.</p>
</div>
</div>
<p>On peut considérer la mémoire d'un ordinateur comme un long tableau de taille fixe, mesurée en <a href="https://fr.wikipedia.org/wiki/Octet">octet</a> (appelé <em>byte</em> en anglais).</p>
<p><img src="m%C3%A9moire.png" alt="mémoire"></p>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Un octet correspond à 8bits, permettant d'encoder $2^8 = 256$ informations ou nombres de $00000000$ (0 en base 10) à $11111111$ ($255=2^8-1$ en base 10).</p>
</div>
</div>
<p>Comme un programme n'est jamais seul à être exécuté sur un ordinateur et que — pour des raisons de sécurité — un programme $A$ ne doit pas pouvoir accéder à la mémoire utilisée par un programme $B$ :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Le <strong>système d'exploitation</strong> est le seul à pouvoir accéder à une case donnée de la mémoire via son indice, comme on pourrait le faire avec un tableau normal. Un programme spécifique en revanche, ne peut accéder qu'à la partie de la mémoire qui lui a été allouée par le système d'exploitation.</p>
</div>
</div>
<h3>Accéder/allouer de la mémoire</h3>
<p>Comme le système d'exploitation alloue de la mémoire et que plusieurs programmes se la partagent, il est uniquement possible pour un programme donné :</p>
<ul>
<li>de demander un <strong>bloc</strong> de $k$ octets <strong>consécutifs</strong> de la mémoire</li>
<li>de libérer un bloc de mémoire alloué.</li>
</ul>
<p>Il lui est en revanche impossible :</p>
<ul>
<li>de modifier la taille d'un bloc qui lui a été alloué</li>
<li>de choisir l'endroit de la mémoire qu'il veut se faire allouer</li>
</ul>
<p>On ne sait en effet pas si la mémoire à côté d'un bloc est libre ou non. Par exemple dans la figure ci-dessous, le seul emplacement libre en mémoire est la case blanche. Le programme <em>vert</em> ne peut demander à augmenter le bloc de 3 octets qui lui est alloué, sinon il risque de rentrer en conflit avec le programme <em>rouge</em> :</p>
<p><img src="m%C3%A9moire-partag%C3%A9e.png" alt="mémoire partagée"></p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Il est impossible d'augmenter simplement la taille d'un tableau alloué en mémoire. Il faut le recréer et recopier toutes ses valeurs dans un autre endroit de la mémoire.</p>
</div>
</div>
<h3>Stocker en mémoire</h3>
<p>Avant de parler des moyens qu'a un programme de se rappeler ce qu'il a stocké, regardons comment on peut stocker des objets en mémoire en prenant l'exemple d'un entier.</p>
<p>La façon courante de stocker des objets est d'utiliser des <strong>références</strong>. Mais pour bien comprendre ce que c'est il faut commencer par parler (un peu) des valeurs.</p>
<h4>Stockage de valeurs</h4>
<p>La mémoire étant une suite fini d'octets, si l'on veut stocker plus qu'un nombre entre 0 et 255 (ou -128, 127 s'il est <a href="https://en.wikipedia.org/wiki/Signed_number_representations">signé</a>), il faut lui réserver plus d'une case.</p>
<p>Au début de l'informatique, il y avait plusieurs types d'entiers, selon ce qu'on voulait stocker. Par exemple :</p>
<ul>
<li>pour stocker des entier de 0 à 255 on avait le <code class="language-">char</code> (1 octet)</li>
<li>pour stocker des entiers de -32768 à 32767 on avait le type <code class="language-">int</code> (2 octets)</li>
<li>pour des entiers allant de −2147483647 à 2147483647 on avait le type <code class="language-">long</code> (4 octets)</li>
</ul>
<p>On précisait dans notre programme quel type d'entier on voulait utiliser pour telle ou telle variable et un espace mémoire lui était alloué :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Dans l'ancien temps une variable était l'indice en mémoire dans le lequel était stocké la donnée.</p>
</div>
</div>
<p><img src="m%C3%A9moire-int.png" alt="un int"></p>
<p>Ce type de fonctionnement a ses avantages :</p>
<ul>
<li>on ne se préoccupe pas de la taille en mémoire. La taille est fixée au départ selon le type de la variable choisie</li>
<li>il y a une correspondance stricte entre variable et indice dans le tableau de la mémoire</li>
<li>la taille d'un tableau d'objets d'un type fixé est facile à calculer.</li>
</ul>
<p>Mais cela avait aussi de (très) gros inconvénients :</p>
<ul>
<li>comment coder 32768 si j'ai décidé au départ que ma variable était un <code class="language-">int</code> ?</li>
<li>on ne peut pas avoir de tableaux combinant plusieurs types d'objets car il est impossible de calculer facilement l'indice donné d'un tableau contenant plusieurs types .</li>
<li>si on écrit <code class="language-">i = j</code>, il <strong>faut</strong> recopier le contenu de <code class="language-">i</code> (à l'adresse mémoire de <code class="language-">i</code>) dans <code class="language-">j</code> (à l'adresse mémoire de <code class="language-">j</code>) : un même objet ne peut pas avoir plusieurs noms.</li>
</ul>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Lorsque l'on fait de la programmation système (en codant en C ou encore en Rust par exemple), tout ceci est toujours vrai. Les entiers ne sont pas aussi grand qu'on veut comme lorsque l'on code en python. Ceci dit, un entier sur 32bits (4 octets) permet tout de même d'encoder $2^{32} = 4294967296$ entiers, ce qui est la plupart du temps largement suffisant.</p>
</div>
</div>
<h4>Stockage d'objets</h4>
<p>Actuellement — si l'on ne fait pas de programmation système — on préfère ne pas avoir à gérer directement la mémoire et surtout, on veut dissocier la variable de sa valeur : écrire <code class="language-">i = j</code> doit signifier que l'objet désigné par la variable <code class="language-">j</code> doit <strong>aussi</strong> être désigné par <code class="language-">i</code>. Pour cela, on dissocie la variable de l'emplacement en mémoire de l'objet.</p>
<p>La définition actuelle d'une <em>variable</em> est alors :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Une <em><strong>variable</strong></em> est une référence à un objet stocké en mémoire.</p>
</div>
</div>
<p>Le moyen de le plus simple de définir une référence, c'est de prendre l'indice de la première case mémoire contenant l'objet.</p>
<p>Prenons un exemple : supposons que notre ordinateur dispose de 16Go (gigaoctets) de RAM. L'indice de notre tableau de mémoire va alors de $0$ à $10^9-1$ : il faut 4 octets pour stocker un indice en mémoire.</p>
<p><img src="m%C3%A9moire-r%C3%A9f%C3%A9rence.png" alt="référence"></p>
<p>La figure ci-dessus montre alors une variable (<em>verte</em>) représentant un objet entier (<em>orange</em>) : elle contient l'indice du tableau de la mémoire contenant le premier élément de l'objet (sa référence, $i^\star$ dans la figure).</p>
<p>Les bénéfices de cette méthode sont énormes :</p>
<ul>
<li>les objets sont uniques, en écrivant <code class="language-">i = j</code> les deux variables ont le même objet en référence</li>
<li>un tableau devient un tableau de référence, il peut contenir des types d'objets différents sans soucis</li>
<li>on peut facilement modifier un objet, sans avoir à changer toutes les variables qui le référencent.</li>
</ul>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-red-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Comme on manipule directement les objets, il faut faire attention aux effets de bords lorsqu'on les modifie.</p>
</div>
</div>
<p>Par exemple en python :</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
u <span class="token operator">=</span> t
u<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
</code></pre>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>que vaut <code class="language-">print(t)</code> ?</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<p><code class="language-">[1, 12, 3]</code> on a modifié l'objet référencé par <code class="language-">u</code>, qui est le même que celui référencé par <code class="language-">t</code></p>
</div>
</details>     
</div>
<p>Plus insidieux :</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">t <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
u <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token string">"?"</span><span class="token punctuation">]</span>
u<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
</code></pre>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>que vaut <code class="language-">print(t)</code> ?</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<p><code class="language-">[1, 12, 3]</code> on a modifié l'objet référencé par <code class="language-">u[1]</code>, qui est le même que celui référencé par <code class="language-">t</code></p>
</div>
</details>     
</div>
<h3>Pile et tas</h3>
<p>En règle générale et variables et objets ne sont pas rangées au même endroit de la mémoire :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Un programme stocke les variables (des références) dans un endroit de la mémoire nommé <em><strong>pile</strong></em> et les objets (cases consécutives allouées en mémoire) dans l'endroit de la mémoire nommé <em><strong>tas</strong></em>.</p>
<ul>
<li>la <em><strong>pile (stack)</strong></em> permet d'entasser les références. Chaque case de la pile a exactement la taille d'un indice de la mémoire</li>
<li>le <em><strong>tas (heap)</strong></em> est un espace contigu de la mémoire (un tableau) dont on peut allouer ou dé-allouer une partie.</li>
</ul>
</div>
</div>
<p>A chaque fois qu'une variable est crée, le programme :</p>
<ul>
<li>alloue de la mémoire dans le tas qui contiendra l'objet. Si c'est un nouvel objet, ou incrémente le nombre de variables pointant sur cet objet</li>
<li>le premier indice de la mémoire contenant l'objet est empilée dans la pile (c'est la variable)</li>
</ul>
<p>Lorsque qu'une variable disparaît :</p>
<ul>
<li>on dépile l'indice pointant sur l'objet de la pile</li>
<li>on décrémente le nombre de variables pointant sur cet objet et si ce nombre vaut 0, on dé-alloue l'objet</li>
</ul>
<p>Cette façon de procéder pour gérer les variables est appelé <em><strong>stockage par référence</strong></em>. La pile contient une adresse (une référence) correspondant à l'objet qui lui est stocké dans le tas.</p>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Certains langages comme le C ou le Rust par exemple permettent également de stocker certaines variables directement dans la pile (les entiers par exemple, mais en vrai tout objet dont on peut connaître précisément la taille). Ceci accélère le code (on a pas besoin d'un sauter de la pile à la mémoire du tas ce qui fait gagner une indirection) mais complique le codage (la manipulation du tas est explicite et il faut faire très attention à sa gestion).</p>
</div>
</div>
<p>Pour plus d'informations, vous pouvez par exemple regarder la vidéo ci-après qui explicite le tas et la pile :</p>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-emerald-500 bg-emerald-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"></path>
</svg>
<div class="pl-8 mr-8">
<p><a href="https://www.youtube.com/watch?v=5OJRqkYbK-4">Pile et tas</a></p>
</div>
</div>
<h2>Programme objet</h2>
<p>La quasi-entièreté des langages actuellement sont dit <em>objet</em>. C'est à dire que :</p>
<ul>
<li>ce que manipule un programme est appelé objet.</li>
<li>les variables sont des références aux objets.</li>
</ul>
<p>Ces langages permettent de créer des programmes en utilisant uniquement les deux mécanismes ci-dessous :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Pour qu'un programme objet fonctionne, on a besoin de deux mécanismes :</p>
<ul>
<li>un moyen de stocker des données et de les manipuler (les objets et leurs méthodes)</li>
<li>un moyen d'y accéder (les variables)</li>
</ul>
</div>
</div>
<h3>Objets</h3>
<p>On y reviendra, mais pour l'instant considérez qu'un objet est une structure de donnée générique permettant de gérer tout ce dont à besoin un programme :</p>
<ul>
<li>des données</li>
<li>des fonctions</li>
<li>des modules</li>
<li>...</li>
</ul>
<p>Tout est objet dans un langage objet.</p>
<h3>Variables</h3>
<p>Les variables sont des références aux objets. Pour ce faire, on utilise l’opérateur d’affectation <code class="language-">=</code> :</p>
<pre class="language-txt " style="counter-reset: linenumber 0"><code class="language-txt">variable = objet
</code></pre>
<p>A gauche de l’opérateur <code class="language-">=</code> se trouve une <strong>variable</strong> (en gros, quelque chose ne pouvant commencer par un nombre) et à droite un <strong>objet</strong>. Dans toute la suite du programme, dès que le programme rencontrera le nom, il le remplacera par l'objet.</p>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-red-500 bg-red-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-red-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Un variable n'est <strong>PAS</strong> une chaîne de caractères. Une chaîne de caractères est un objet alors qu’une variable est un alias vers un objet.</p>
</div>
</div>
<p>Il est important de comprendre que l’opérateur d’affectation <code class="language-">=</code> n’est pas symétrique. À gauche, des variables et à droite, des objets.</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Une variable n'est <strong>pas</strong> l'objet, c'est une référence à celui-ci</p>
</div>
</div>
<p>La variable peut être vue comme un <strong>nom</strong> de l'objet à ce moment du programme. Un objet pourra avoir plein de noms différents au cours de l'exécution du programme, voire plusieurs noms en même temps.</p>
<p>Pour s'y retrouver et avoir une procédure déterministe pour retrouver les objets associés aux variables, voire choisir parmi plusieurs variables de même nom, elles sont regroupées par ensembles — nommés <strong>espaces de noms</strong> — hiérarchiquement ordonnés.</p>
<h2><span id="espace-noms"></span> Espaces de noms</h2>
<p>Les espaces de noms nous permettent d'abstraire ce qu'il se passe en mémoire :</p>
<ul>
<li>on considère que les objets sont stockés dans <em>l'espace des objets</em> : cet espace est <strong>unique</strong></li>
<li>on accède aux objets via leurs noms, eux même stockés dans des <em>espaces de noms</em> : il y a de <strong>nombreux</strong> espaces de noms.</li>
</ul>
<p>Pour chaque <em>espace de noms</em> :</p>
<ul>
<li>il ne peut y avoir 2 noms identiques dans un même espace de noms</li>
<li>à chaque nom est associé un objet</li>
<li>certains espaces de noms possèdent un parent</li>
</ul>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Pour expliciter comment tout ça se passe, on va se concentrer sur le <a href="https://docs.python.org/3/tutorial/classes.html#python-scopes-and-namespaces">langage python</a>, mais la procédure est similaire pour les autres langages à objets.</p>
</div>
</div>
<p>Lorsque l'on exécute un programme, un premier espace de noms est créé :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Au démarrage d'une exécution d'un programme, l'espace de noms principal, nommé <code class="language-">global</code> est créé.</p>
</div>
</div>
<p>Au départ, il ne contient rien, à part des noms commençant et finissant par <code class="language-">__</code>, qui sont utilisés par python.</p>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Pour voir les noms définit dans l'espace de noms global, on utilise en python la fonction <code class="language-">globals()</code> qui rend un dictionnaire contenant le nom et l'objet associé à chaque variable.</p>
<p>Au démarrage del'interpréteur, il n'y pas grand chose dans globals :</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">globals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token string">'__name__'</span><span class="token punctuation">:</span> <span class="token string">'__main__'</span><span class="token punctuation">,</span> <span class="token string">'__doc__'</span><span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">'__package__'</span><span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">'__loader__'</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'_frozen_importlib.BuiltinImporter'</span><span class="token operator">></span><span class="token punctuation">,</span> <span class="token string">'__spec__'</span><span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token string">'__annotations__'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'__builtins__'</span><span class="token punctuation">:</span> <span class="token operator">&lt;</span>module <span class="token string">'builtins'</span> <span class="token punctuation">(</span>built<span class="token operator">-</span><span class="token keyword">in</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">}</span>

</code></pre>
</div>
</div>
<p>A tout moment de l'exécution d'un programme, un espace de noms pourra être créé. En  revanche :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>A tout moment du programme, on pourra créer un nouvel espace de noms : de nombreux espaces de noms pourront être définis, mais il existera toujours <strong>un</strong> espace de noms courant où l'on créera les variables et où on cherchera les noms par défaut.</p>
</div>
</div>
<p>On donnera dans la suite de cette partie des exemples qui permettront de mieux comprendre ce processus.</p>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Pour voir les noms définis dans l'espace de noms courant, on utilise en python la fonction <code class="language-">locals()</code>.</p>
</div>
</div>
<h3>Noms et variables</h3>
<p>Prenons plusieurs exemples, qui illustreront les cas principaux.</p>
<h4>Association objet et noms</h4>
<p>Considérons le programme suivant :</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">x <span class="token operator">=</span> <span class="token number">1</span>
y <span class="token operator">=</span> <span class="token number">1</span>
</code></pre>
<p>Exécutons le ligne à ligne :</p>
<ol>
<li>avant l'exécution de la première ligne :
<ol>
<li>on a un unique espace de noms (<code class="language-">global</code>) qui est l'espace courant (en vert sur la figure)<br>
<img src="cas-1-1.png" alt="cas-1-1"></li>
</ol>
</li>
<li>on exécute la première ligne. Elle s'exécute ainsi :
<ol>
<li>on commence à droite du <code class="language-">=</code> : on crée un objet de type entier</li>
<li>on crée le nom <code class="language-">x</code> dans l'espace de noms courant (ici <code class="language-">global</code>) et on lui affecte l'objet.<br>
<img src="cas-1-2.png" alt="cas-1-2"></li>
</ol>
</li>
<li>on exécute la deuxième ligne. Elle s'exécute ainsi :
<ol>
<li>on commence à droite du <code class="language-">=</code> : on crée un objet de type entier</li>
<li>on crée le nom <code class="language-">y</code> dans l'espace de noms courant (ici <code class="language-">global</code>) et on lui affecte l'objet.<br>
<img src="cas-1-3.png" alt="cas-1-3"></li>
</ol>
</li>
</ol>
<p>A la fin du programme, il y a <strong>2 objets entiers différents</strong> (même si tous les 2 valent 1), dont les noms sont, dans l'espace de noms global, respectivement <code class="language-">x</code> et <code class="language-">y</code>.</p>
<h4>Réutilisation du même nom</h4>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">x <span class="token operator">=</span> <span class="token number">1</span>
x <span class="token operator">=</span> <span class="token number">3</span>
</code></pre>
<p>Exécutons le ligne à ligne :</p>
<ol>
<li>avant l'exécution de la première ligne :
<ol>
<li>on a un unique espace de noms (<code class="language-">global</code>) qui est l'espace courant (en vert sur la figure)<br>
<img src="cas-1-1.png" alt="cas-1-1"></li>
</ol>
</li>
<li>on exécute la première ligne. Elle s'exécute ainsi :
<ol>
<li>on commence à droite du <code class="language-">=</code> : on crée un objet de type entier</li>
<li>on crée le nom <code class="language-">x</code> dans l'espace de noms courant (ici <code class="language-">global</code>) et on lui affecte l'objet.<br>
<img src="cas-1-2.png" alt="cas-1-2"></li>
</ol>
</li>
<li>on exécute la deuxième ligne. Elle s'exécute ainsi :
<ol>
<li>on commence à droite du <code class="language-">=</code> : on crée un objet de type entier</li>
<li>on crée le nom <code class="language-">x</code> dans l'espace de noms courant (ici <code class="language-">global</code>) et on lui affecte l'objet.<br>
<img src="cas-2-1.png" alt="cas-2-1"></li>
</ol>
</li>
</ol>
<p>Notez que le fait qu'un nom identique existe déjà n'est pas important. Le nouveau nom écrase l'autre :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Dans un espace de noms, chaque nom est différent. Réutiliser le même nom remplace le nom précédent.</p>
</div>
</div>
<p>Le programme a créé <strong>2 objets</strong> (un entier valant 1 et un entier valant 3), mais à la fin de la deuxième ligne du programme, seul l'entier valant 3 a un nom (<code class="language-">x</code>).</p>
<p>Comme il est maintenant impossible d'accéder à l'entier valant <code class="language-">1</code> : python le détruit.</p>
<p><img src="cas-2-2.png" alt="cas-2-2"></p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Tout objet qui n'est plus référencé par une variable est détruit par un mécanisme appelé <a href="https://fr.wikipedia.org/wiki/Ramasse-miettes_(informatique)">ramasse-miettes</a>.</p>
</div>
</div>
<h4>Un objet peut avoir plusieurs noms</h4>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">x <span class="token operator">=</span> <span class="token number">1</span>
y <span class="token operator">=</span> x
</code></pre>
<p>Exécutons le ligne à ligne :</p>
<ol>
<li>avant l'exécution de la première ligne :
<ol>
<li>on a un unique espace de noms (<code class="language-">global</code>) qui est l'espace courant (en vert sur la figure)<br>
<img src="cas-1-1.png" alt="cas-1-1"></li>
</ol>
</li>
<li>on exécute la première ligne. Elle s'exécute ainsi :
<ol>
<li>on commence à droite du <code class="language-">=</code> : on crée un objet de type entier</li>
<li>on crée le nom <code class="language-">x</code> dans l'espace de noms courant (ici <code class="language-">global</code>) et on lui affecte l'objet.<br>
<img src="cas-1-2.png" alt="cas-1-2"></li>
</ol>
</li>
<li>on exécute la deuxième ligne. Elle s'exécute ainsi :
<ol>
<li>on commence à droite du <code class="language-">=</code> : on cherche le nom <code class="language-">x</code> dans l'espace de noms courant. On le trouve et on lui substitue son objet (un entier valant 1)</li>
<li>on crée le nom <code class="language-">x</code> dans l'espace de noms courant (ici <code class="language-">global</code>) et on lui affecte l'objet.<br>
<img src="cas-3-1.png" alt="cas-3-1"></li>
</ol>
</li>
</ol>
<p>Le programme n'a crée qu'un objet (un entier valant 1) et il a deux noms (<code class="language-">x</code> et <code class="language-">y</code>) :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Dans un même espace de noms, un même objet peut être référencé plusieurs fois, sous plusieurs noms différents.</p>
</div>
</div>
<p>Les noms ne sont jamais utilisés en tant que tel. Dès qu'ils sont rencontrés, ils sont immédiatement remplacés par les objets qu'ils référencent.</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Pour exécuter une instruction, on commence <strong>toujours</strong> par remplacer les variables par les objets qu'elles référencent.</p>
</div>
</div>
<p>La remarque précédente permet de comprendre mieux ce que fait le code suivant (et pourquoi cela fonctionne) :</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">x <span class="token operator">=</span> <span class="token number">1</span>
y <span class="token operator">=</span> <span class="token number">3</span>
x<span class="token punctuation">,</span> y <span class="token operator">=</span> y<span class="token punctuation">,</span> x
</code></pre>
<div class="relative drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-indigo-500 bg-indigo-100">
<details class="group">
<summary class="list-none py-0.5">
<svg class="group-open:hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
</svg>
<svg class="group-open:block hidden absolute w-7 h-7 pl-1 pt-0.5 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
</svg>
<div class="pl-8 font-bold inline-block">
<p>solution</p>
</div>
<svg class="group-open:hidden inline-block pl-3 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path>
</svg>
</summary>
<div class="mx-8 pb-2">
<p>Il échange les objets référencés par <code class="language-">x</code> et <code class="language-">y</code>.</p>
<p>Cela marche car on commence par remplacer les variables par les objets (la droite du <code class="language-">=</code>) avant de créer les variables (la gauche du <code class="language-">=</code>).</p>
</div>
</details>     
</div>
<h3>Fonctions</h3>
<p>L'exécution d'une fonction est un moment où un espace de noms est créé. Cela se passe  selon le processus suivant :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Lorsque l'on exécute une fonction on procède comme suit :</p>
<ol>
<li>on crée un nouvel espace de noms $F$</li>
<li>l'espace de noms courant est affecté au parent de $F$</li>
<li>$F$ devient le nouvel espace de noms courant.</li>
<li>on affecte les paramètres de la fonction à leurs noms</li>
<li>on exécute ligne à ligne la fonction</li>
<li>le parent de $F$ devient le nouvel espace de noms courant</li>
<li>on supprime l'espace de noms $F$</li>
</ol>
</div>
</div>
<h4>Exécution d'une fonction</h4>
<pre class="language-python line-numbers" style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
   i <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> x
   <span class="token keyword">return</span> i <span class="token operator">+</span> <span class="token number">3</span>

i <span class="token operator">=</span> <span class="token number">2</span>
x <span class="token operator">=</span> f<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Exécutons le ligne à ligne :</p>
<ol>
<li>avant l'exécution de la première ligne :
<ol>
<li>on a un unique espace de noms (<code>global</code>) qui est l'espace courant (en vert sur la figure)<br>
<img src="cas-1-1.png" alt="cas-1-1"></li>
</ol>
</li>
<li>la ligne 2 définit une fonction de nom <code class="language-">f</code> qui est ajouté à l'espace de noms courant.<br>
<img src="cas-4-1.png" alt="cas-4-1"></li>
<li>on passe directement à la ligne 5 puisque les lignes 3 et 4 sont le contenu de la fonction.
<ol>
<li>Cette ligne crée un objet entier (valant 2) et l'affecte au nom <code class="language-">i</code>.<br>
<img src="cas-4-2.png" alt="cas-4-2"></li>
</ol>
</li>
<li>la ligne 6 est encore une affectation. On commence par trouver l'objet à droite du <code>=</code> c'est le résultat de <code class="language-">f(i)</code>. Il faut donc exécuter la fonction <code class="language-">f</code> pour connaître cet objet :
<ol>
<li>on cherche l'objet associé à <code class="language-">i</code> qui sera le (premier) paramètre de la fonction</li>
<li>on crée un espace de noms qui devient l'espace de noms courant :
<ol>
<li>l'ancien espace de noms courant devient son parent<br>
<img src="cas-4-3.png" alt="cas-4-3"></li>
</ol>
</li>
<li>on affecte le premier paramètre de <code class="language-">f</code> au nom <code class="language-">x</code> (le nom du premier paramètre de <code class="language-">f</code> lors de sa définition)
<ol>
<li>les nouveaux noms sont <strong>toujours</strong> créés dans l'espace de noms courant<br>
<img src="cas-4-4.png" alt="cas-4-4"></li>
</ol>
</li>
<li>on exécute la ligne 2 qui est la première ligne de la fonction <code class="language-">f</code> :
<ol>
<li>on crée un objet entier (valant 4) qui est le résultat de l'opération à droite du <code class="language-">=</code> (notez que le nom <code class="language-">x</code> est bien défini dans l'espace de noms courant) et on l'affecte au nom <code class="language-">i</code> dans l'espace de noms courant<br>
<img src="cas-4-5.png" alt="cas-4-5"></li>
</ol>
</li>
<li>on exécute la ligne 3 :
<ol>
<li>on crée l'objet résultant de l'opération somme (un entier valant 7)</li>
<li>la fonction est terminée, son espace de noms courant est détruit</li>
<li>l'espace de noms courant devient le parent de l'espace de noms détruit<br>
<img src="cas-4-6.png" alt="cas-4-6"></li>
<li>on rend l'objet résultat de la fonction</li>
</ol>
</li>
<li>la droite du signe <code class="language-">=</code> de la ligne 6 est trouvée (c'est un entier valant 7) et il est affecté à la variable <code class="language-">x</code> de l'espace de noms courant (qui est à nouveau <code>global</code>)
<ol>
<li><img src="cas-4-7.png" alt="cas-4-7"></li>
<li>les objets sans nom sont détruits<br>
<img src="cas-4-8.png" alt="cas-4-8"></li>
</ol>
</li>
</ol>
</li>
</ol>
<h4>Espaces de noms parent</h4>
<p>L'espace de noms parent sert lorsque l'on cherche un nom qui n'est pas défini dans l'espace de noms courant :</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Si un nom est recherché, mais que celui-ci n'est défini dans l'espace de noms courant, le nom est recherché dans l'espace de noms parent de l'espace courant.</p>
</div>
</div>
<pre class="language-python line-numbers" style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">def</span> <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>
   i <span class="token operator">=</span> C <span class="token operator">*</span> x
   <span class="token keyword">return</span> i <span class="token operator">+</span> <span class="token number">3</span>

C <span class="token operator">=</span> <span class="token number">2</span>
i <span class="token operator">=</span> <span class="token number">2</span>
x <span class="token operator">=</span> f<span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Lors de l'exécution de la fonction <code class="language-">f</code> (instruction de la ligne 7), sa première ligne cherche la variable nommée <code class="language-">C</code>. On se trouve dans cet état là :</p>
<p><img src="cas-5-1.png" alt="cas-5-1"></p>
<p>La variable <code class="language-">C</code> n'existe pas dans l'espace de noms courant (celui de <code class="language-">f</code>), le programme va alors chercher dans l'espace de noms parent s'il existe. Ici c'est le cas puisque l'espace parent de <code class="language-">f</code> est <code>global</code> dans lequel <code class="language-">C</code> est défini : le programme ne produit donc pas une erreur et trouve le bon objet.</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Les variables sont <strong>toujours</strong> créées dans l'espace de noms courant, mais leur recherche remonte de parent en parent jusqu'à la trouver.</p>
</div>
</div>
<h3>Import</h3>
<p>Lorsque l'on importe un fichier, un espace de noms est créé et le fichier entier est lu. Lors de sa lecture, les noms définis sont placés dans cet espace.</p>
<div class="quote relative drop-shadow  py-2 pr-2 rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-amber-800 bg-amber-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-amber-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Les modules possèdent un espace de noms qui contient les variables qui y sont définies</p>
</div>
</div>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python"><span class="token keyword">import</span> random
<span class="token keyword">from</span> math <span class="token keyword">import</span> log

<span class="token keyword">print</span><span class="token punctuation">(</span>log<span class="token punctuation">(</span>random<span class="token punctuation">.</span>randrange<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>Avant l'exécution de l'instruction <code class="language-">print</code> on est dans cet état :</p>
<p><img src="cas-6-1.png" alt="cas-6-1"></p>
<p>On accède à l'espace de noms du module par la notation pointée : <code class="language-">random.randrange</code> signifie le nom <code class="language-">randrange</code> dans l'espace de noms de <code class="language-">random</code>.</p>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>Notez que le module <code class="language-">math</code> n'a plus d'espace de noms associé puisque l'on a juste <em>récupéré</em> un nom qui y est défini.</p>
</div>
</div>
<h2><span id="notation-pointée"></span> Notation pointée</h2>
<p>En python, (pratiquement) tout a un espace de nom. On s'en sert dès qu'on utilise la notation pointée.</p>
<p>on l'a vue pour les modules, mais c'est aussi vrai pour les objets. En considérant le code suivant :</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">c <span class="token operator">=</span> <span class="token string">"coucou"</span>
c2 <span class="token operator">=</span> c<span class="token punctuation">.</span>uppercase<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Le nom <code class="language-">uppercase</code> est défini dans l'espace de noms de la chaîne de caractères <code class="language-">&quot;coucou&quot;</code> (en fait, c'est dans sa classe, mais on le verra précisément plus tard).</p>
<p>C'est une notation <strong>très puissante</strong> ! Il ne faut pas avoir peur de chaîner ces notations. On appelle cela des chaînages :</p>
<pre class="language-python " style="counter-reset: linenumber 0"><code class="language-python">a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">.</span>d<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Signifie :</p>
<ol>
<li>On exécute <code class="language-">d</code> qui est dans l'espace de noms de <code class="language-">a.b.c</code></li>
<li><code class="language-">c</code> est dans l'espace de noms de <code class="language-">a.b</code></li>
<li><code class="language-">b</code> est dans l'espace de noms de <code class="language-">a</code></li>
<li><code class="language-">a</code> est dans l'espace de noms courant</li>
</ol>


</article>
    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            Cours d'informatique à l'école centrale Marseille
          </p>
        </div>
        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>