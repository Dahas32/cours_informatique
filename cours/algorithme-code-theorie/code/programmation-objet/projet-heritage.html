<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Héritage | cours d’informatique</title>
<meta name="generator" content="Jekyll v4.2.0">
<meta property="og:title" content="Héritage">
<meta name="author" content="François Brucker">
<meta property="og:locale" content="en_US">
<meta name="description" content="Support de cours/td d’informatique de François Brucker.">
<meta property="og:description" content="Support de cours/td d’informatique de François Brucker.">
<link rel="canonical" href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-heritage.html">
<meta property="og:url" content="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-heritage.html">
<meta property="og:site_name" content="cours d’informatique">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Héritage">
<script type="application/ld+json">
{"description":"Support de cours/td d’informatique de François Brucker.","@type":"WebPage","author":{"@type":"Person","name":"François Brucker"},"url":"/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-heritage.html","headline":"Héritage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cours_informatique/assets/main.css">

  <link rel="stylesheet" href="/cours_informatique/assets/custom.css">

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link type="application/atom+xml" rel="alternate" href="/cours_informatique/feed.xml" title="cours d'informatique">
<script>MathJax={"tex":{"inlineMath":[["$","$"],["\\(","\\)"]],"displayMath":[["\\[","\\]"]]},"svg":{"fontCache":"global"},"svg":{"fontCache":"global"}}</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>

<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/cours_informatique/">cours d'informatique</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/cours_informatique/about"> about </a>
        </div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Héritage</h1>Auteurs :
      <ul>
      
        <li><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">François Brucker</span></span></li>
      
        <li><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Célia Châtel</span></span></li>
      
      </ul>
  </header>

  <div class="post-content">
    <blockquote class="chemin">
  <p><a href="/cours_informatique/cours/algorithme-code-theorie/">Algorithme, code et théorie</a> / <a href="/cours_informatique/cours/algorithme-code-theorie/code/">code</a> / <a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/">programmation objet</a> / <a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-heritage.html">projet : héritage</a></p>

  <p><strong>prérequis :</strong></p>

  <ul>
    <li><a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/heritage.html">héritage</a></li>
    <li><a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-composition-agregation.html">projet : composition et agrégation</a></li>
  </ul>
</blockquote>

<p>Présentation du mécanisme d’héritage qui permettant de factoriser du code entre classes.</p>

<h2 id="le-dé">Le dé</h2>

<p>Nous allons ici réutiliser la classe <code class="language-plaintext highlighter-rouge">Dice</code> entamée lors du <a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-composition-agregation.html">projet : composition et agrégation</a>. Pour être sûr de repartir sur de bonnes bases, utilisez l’implémentation minimale ci-après.</p>

<h3 id="code-dice">code</h3>

<h4 id="classe">classe</h4>

<p>Fichier <em>“dice.py”</em> :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">random</span>


<span class="k">class</span> <span class="nc">Dice</span><span class="p">:</span>
    <span class="n">NUMBER_FACES</span> <span class="o">=</span> <span class="mi">6</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">position</span>

    <span class="k">def</span> <span class="nf">get_position</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">_position</span>

    <span class="k">def</span> <span class="nf">set_position</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_position</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">_position</span> <span class="o">=</span> <span class="n">new_position</span>

    <span class="k">def</span> <span class="nf">roll</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">NUMBER_FACES</span><span class="p">))</span>
</code></pre></div></div>

<h4 id="tests">tests</h4>

<p>Fichier <em>“test_dice.py”</em> :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">dice</span> <span class="kn">import</span> <span class="n">Dice</span>


<span class="k">def</span> <span class="nf">test_dice_creation_no_argument</span><span class="p">():</span>
    <span class="n">dice</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">dice</span><span class="p">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">test_dice_creation_argument</span><span class="p">():</span>
    <span class="n">dice</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">dice</span><span class="p">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">==</span> <span class="mi">4</span>


<span class="k">def</span> <span class="nf">test_dice_set_position</span><span class="p">():</span>
    <span class="n">dice</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">dice</span><span class="p">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="n">dice</span><span class="p">.</span><span class="n">set_position</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">dice</span><span class="p">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">==</span> <span class="mi">3</span>


<span class="k">def</span> <span class="nf">test_dice_roll</span><span class="p">():</span>
    <span class="n">dice</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">()</span>
    <span class="n">dice</span><span class="p">.</span><span class="n">roll</span><span class="p">()</span>
    <span class="k">assert</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">dice</span><span class="p">.</span><span class="n">get_position</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">6</span>

</code></pre></div></div>

<h3 id="un-dé-qui-compte">Un dé qui compte</h3>

<p>Nous voulons créer une version particulière d’un dé : un dé permettant de conserver les statistiques de ses lancers.</p>

<p>Implémentez la classe <code class="language-plaintext highlighter-rouge">StatDice</code> qui hérite de <code class="language-plaintext highlighter-rouge">Dice</code>, retient le nombre de fois que chaque valeur possible a été obtenue et permet de calculer les statistiques associées.</p>

<blockquote class="a-faire">
  <p>Vous devez donc écrire et tester pour la classe <code class="language-plaintext highlighter-rouge">StatDice</code> :</p>

  <ul>
    <li>la méthode <code class="language-plaintext highlighter-rouge">__init__</code> sans oublier d’appeler le constructeur de la classe mère,</li>
    <li>une nouvelle méthode <code class="language-plaintext highlighter-rouge">set_position</code> qui utilise la méthode <code class="language-plaintext highlighter-rouge">set_position</code> du dé classique et met à jour les décomptes de lancers du dé</li>
    <li>une méthode <code class="language-plaintext highlighter-rouge">stats</code> qui renvoie les nombres d’apparition de chaque valeur</li>
  </ul>

</blockquote>

<p>On pourra stocker le nombre d’apparition de chaque face dans une liste où l’indice + 1 correspond à la face.</p>

<h3 id="programme">programme</h3>

<blockquote class="a-faire">
  <p>Créez un programme qui lance $N=1000$  fois votre dé (par exemple) et rend ses statistiques.</p>

  <p>Vous utiliserez ensuite ces statistiques pour faire un <a href="https://fr.wikipedia.org/wiki/Test_du_%CF%87%C2%B2#Exemple_1_:_d%C3%A9termination_de_l'%C3%A9quilibrage_d'un_d%C3%A9">test d’adéquation du $\chi^2$</a> pour vérifier que votre dés est bien équiprobable.</p>
</blockquote>

<p>Un test d’adéquation du $\chi^2$ permet de s’assurer que le résultat d’une expérience est conforme à ce qu’on devrait avoir théoriquement.</p>

<p>Pour cela on calcule le nombre :</p>

\[\chi^2 = \sum_{i=1}^I\frac{(O_i - T_i)^2}{T_i}\]

<p>Où :</p>

<ul>
  <li>$I$ : l’ensemble des possibilités (pour nous $I=6$ puisque la valeur d’un dés pour aller de 1 à 6)</li>
  <li>$O_i$ est le nombre de cas <strong>observés</strong> pour la modalité $i$ (pour nous c’est le nombre de fois où le dé à eu la position $i$)</li>
  <li>$T_i$ est le nombre de cas <strong>théorique</strong> que l’on devrait avoir (dans notre cas $\frac{N}{6}$ si on a lancé $N$ fois notre dé)</li>
</ul>

<p>Plus ce nombre est petit, plus l’expérience est conforme à la théorie.</p>

<p>De façon formelle :</p>

<ul>
  <li>si la théorie est conforme à la réalité, le nombre $\chi^2$  suit une loi du chi2 à $N-1$ degrés de libertés (ici 5 degrés de libertés)</li>
  <li>la probabilité $P_{\mbox{df}}(X \geq K)=\alpha$ nous donne la chance d’obtenir $K$ ou plus pour une loi du chi2 à df degrés de libertés.</li>
</ul>

<p>Pour nous $df = 5$ et si on prend $\alpha = .1$ on trouve : $P_{5}(X \geq 9.236) = .1$ (pour connaitre ces valeurs, on utilise des tables comme <a href="https://people.richland.edu/james/lecture/m170/tbl-chi.html">celle-ci</a>).</p>

<p>Donc si on trouve un $\chi^2$ plus grand ou égal que $9.206$, il y a moins de 10% de chance que l’on ait obtenu ce nombre si l’on suivait une loi du chi2 à df degrés de liberté :</p>

<ul>
  <li>Il y a moins de 10% de chance de se tromper en supposant que notre expérience ne suit pas la théorie</li>
  <li>Il y a moins de 10% de chance de supposer que notre dé n’est pas équilibré</li>
</ul>

<p>C’est que l’on appelle le <a href="https://fr.wikipedia.org/wiki/Test_statistique#Risque_de_premi%C3%A8re_esp%C3%A8ce_et_confiance">risque de première espèce</a> lorsque l’on fait des <a href="https://fr.wikipedia.org/wiki/Test_statistique">test statistiques</a></p>

<blockquote>
  <p>Le test du chi2 est très pratique lorsque l’on veut vérifier nos hypothèse théoriques sont satisfaites expérimentalement.</p>
</blockquote>

<h2 id="donjons-et-dragons">donjons et dragons</h2>

<h3 id="personnages">personnages</h3>

<p>En reprenant le cours :</p>

<blockquote class="a-faire">
  <p>Créez (et testez) les classes personnage, magicien et guerrière.</p>
</blockquote>

<h3 id="bataille">bataille</h3>

<blockquote class="a-faire">
  <p>Créez un programme qui :</p>

  <ul>
    <li>demande à l’utilsateur :
      <ul>
        <li>les caractéristiques d’une guerrière (points de vie, attaque et score de défence</li>
        <li>les caractéristiques d’un <a href="https://www.aidedd.org/dnd/monstres.php?vf=gobelin">gobelin</a> (points de vie, attaque)</li>
        <li>les caractérisitques d’un mago (points de vie, attaque et attaque magique)</li>
      </ul>
    </li>
  </ul>

  <p>Puis,  faites en sorte que la guerrière et le Gobelin se tapent dessus à tour de rôle
jusqu’à ce qu’un des deux ne meure.</p>

  <p>Le dernier héros en vie est ensuite tué par le magicien qui le kite en lui jetant des sorts (comme un fourbe), puis le loote pour aller tout revendre au marchand du bourg (mais c’est une autre histoire et d’autres implémentations).</p>

  <p>Vous donnerez le nombre de tour nécessaire pour cela (testez plusieurs possibilités).</p>
</blockquote>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cours_informatique/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">cours d'informatique</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">cours d'informatique</li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list"><li><a href="https://github.com/FrancoisBrucker"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#github"></use></svg> <span class="username">FrancoisBrucker</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Support de cours/td d'informatique de François Brucker.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
