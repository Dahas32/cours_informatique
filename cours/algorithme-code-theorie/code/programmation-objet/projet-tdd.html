<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>TDD et test pattern | cours d’informatique</title>
<meta name="generator" content="Jekyll v4.2.0">
<meta property="og:title" content="TDD et test pattern">
<meta name="author" content="François Brucker">
<meta property="og:locale" content="en_US">
<meta name="description" content="Support de cours/td d’informatique de François Brucker.">
<meta property="og:description" content="Support de cours/td d’informatique de François Brucker.">
<link rel="canonical" href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-tdd.html">
<meta property="og:url" content="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-tdd.html">
<meta property="og:site_name" content="cours d’informatique">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="TDD et test pattern">
<script type="application/ld+json">
{"headline":"TDD et test pattern","description":"Support de cours/td d’informatique de François Brucker.","@type":"WebPage","url":"/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-tdd.html","author":{"@type":"Person","name":"François Brucker"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cours_informatique/assets/main.css">

  <link rel="stylesheet" href="/cours_informatique/assets/custom.css">

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link type="application/atom+xml" rel="alternate" href="/cours_informatique/feed.xml" title="cours d'informatique">
</head>

<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/cours_informatique/">cours d'informatique</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/cours_informatique/about"> about </a>
        </div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">TDD et test pattern</h1>Auteur : <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">François Brucker</span></span>
  </header>

  <div class="post-content">
    <p>Nous allons dans cette séance suivre ici le livre <a href="https://www.amazon.fr/Test-Driven-Development-Kent-Beck/dp/0321146530/ref=sr_1_1?ie=UTF8&qid=1538720480&sr=8-1&keywords=test+driven+development+by+example">TDD by example</a> de Kent Beck (Suivez son <a href="https://twitter.com/kentbeck">twitter</a>, ses posts sont souvent rigolos et toujours utiles).</p>

<p>Initialement écrit pour le java, nous allons appliquer ses enseignements au python.</p>

<!--more-->

<blockquote class="chemin">
  <p><a href="/cours_informatique/cours/algorithme-code-theorie/">Algorithme, code et théorie</a> / <a href="/cours_informatique/cours/algorithme-code-theorie/code/">code</a> / <a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/">programmation objet</a> / <a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-tdd.html">projet : TDD</a></p>

  <p><strong>prérequis :</strong></p>

  <ul>
    <li><a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-heritage.html">projet : héritage</a></li>
  </ul>

</blockquote>

<h2 id="but">But</h2>

<p>En suivant le déroulé du livre <a href="https://www.amazon.fr/Test-Driven-Development-Kent-Beck/dp/0321146530/ref=sr_1_1?ie=UTF8&qid=1538720480&sr=8-1&keywords=test+driven+development+by+example">TDD by example</a>, vous allez apprendre à écrire du code par les tests.
Vous allez y apprendre le <a href="https://naruto.fandom.com/fr/wiki/Nind%C3%B4">nindo</a> de la proatique d’un bon code :</p>

<blockquote class="note">
  <p>Créer du code <strong>propre</strong> qui <strong>fonctionne</strong></p>

  <p>(<em>clean code that works</em> en version originale)</p>
</blockquote>

<p>Outre la méthode, nous verrons également quelques tehcniques pour y arriver de façon claire et pratique, comme des règles de refactoring (issues de <a href="https://www.amazon.fr/Refactoring-Improving-Design-Existing-Code/dp/0201485672/ref=sr_1_2?ie=UTF8&qid=1539066441&sr=8-2">Refactoring: Improving the Design of Existing Code</a> de <a href="https://martinfowler.com">Martin fowler</a> (allez voir son site, y’a moult choses chouettes sur le code, l’agile, la vie et le reste)).</p>

<p>Ceci devrait vous permettre de diminuer le nombre de WTFs/minute, qui est le meilleur indicateur au monde d’un bon code (issu du livre <a href="https://www.amazon.fr/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882">clean code</a> de <a href="https://fr.wikipedia.org/wiki/Robert_C._Martin">Robert C. Martin</a>. Ce n’est pas un livre pour débutant mais si vous avez déjà compris le tdd, c’est un super pour finaliser votre compréhension) :</p>

<p><img src="./assets/wtfm.jpg" alt="WTFs/minute" style="margin: auto;display: block"></p>

<blockquote class="note">
  <p>Faites l’effort de suivre cette séance en codant <strong>en même temps</strong> le projet. Tout est donné mais le voir fonctionner pour de vrai est plus impressionnant que de juste le lire.</p>
</blockquote>

<p>On va exécuter les tests un million de fois. Pour éviter la luxation de l’index il faut retenir les raccourcis claviers qui vont vous permettre de lancer les tests sans problème :</p>

<ul>
  <li>dédiez un terminal pour cela. Une fois la commande tapée, il vous suffit de faire <em>flèche du haut</em> pour revenir à la commande précédente et l’exécuter</li>
  <li>lorsque vos tests passent, il est intéressant d’utiliser le raccourci clavier de votre éditeur pour exécuter tous les tests (sous <a href="https://docs.microsoft.com/fr-fr/visualstudio/ide/default-keyboard-shortcuts-in-visual-studio?view=vs-2022#bkmk_test-global-shortcuts">vscode</a>).</li>
</ul>

<h2 id="projet">Projet</h2>

<p>Vous allez créer dans cette séance une application de change entre Franc suisse (CHF) et dollars US ($).</p>

<table>
  <thead>
    <tr>
      <th>qui</th>
      <th>combien</th>
      <th>prix</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Apple</td>
      <td>1000</td>
      <td>$200</td>
      <td>$200 000</td>
    </tr>
    <tr>
      <td>Nestlé</td>
      <td>400</td>
      <td>80 CHF</td>
      <td>32 000 CHF</td>
    </tr>
    <tr>
      <td colspan="3">
</td>
      <td><strong>total</strong></td>
      
      
    </tr>
  </tbody>
</table>

<p>Avec le taux de conversion : 1 CHF = $0.5</p>

<h3 id="comment-">Comment ?</h3>

<p>En programmant par les tests bien sur !</p>

<p>On commence par une todo list qui regroupe tout ce que l’on pense faire pour l’instant. Cette liste va diminuer lorsque l’on avancera sur le projet et grossir lorsque notre connaissance du projet va s’affiner.</p>

<p>Nous n’utiliserons pas ici notre code. Mais il faudra tout faire <em>from scratch</em>. On aura donc besoin :</p>

<ul>
  <li>d’une todo list où tous nos items à faire pour l’instant sont écrit : le <em>backlog</em>
</li>
  <li>de fichiers de tests</li>
  <li>du code</li>
</ul>

<p>On verra tout au long du cours divers patterns de test et de développement pour que tout aille pour le mieux. Notre but est ici de faire du :</p>

<blockquote class="note">
  <p><em>clean code that works</em></p>
</blockquote>

<p>Pour cela on va se fixer quelques règles :</p>

<ul>
  <li>on écrit du code que si un test rate</li>
  <li>on élimine les duplications</li>
</ul>

<p>Ces 2 règles impliquent un mode de fonctionnement de note production code :</p>

<blockquote class="note">
  <p><strong>Principe du TDD :</strong></p>

  <ol>
    <li>
<strong>rouge</strong> :
      <ul>
        <li>écrire <em>rapidement</em> un <em>petit</em> test</li>
        <li>lancer les tests et les voir planter, voir même  ne correspondre à aucun code.</li>
      </ul>
    </li>
    <li>
<strong>vert</strong> :
      <ul>
        <li>écrire le code <em>minimal</em> qui permet de faire passer le test</li>
        <li>lancer les tests et les voir tous réussir</li>
      </ul>
    </li>
    <li>
<strong>code/refactor</strong> :
      <ul>
        <li>élimine les duplications tout en conservant la validité des tests.</li>
      </ul>
    </li>
  </ol>

  <p>La partie refactor, qui est la partie réelle où l’on code ne se fait <strong>que sur du vert</strong> : on est assuré de ne pas casser le code puisque les tests passent.</p>
</blockquote>

<p>Cela permet de prendre du plaisir à coder :</p>

<ul>
  <li>en écrivant du code dont est sûr qu’il ne cassera rien</li>
  <li>en voyant la todo list diminuer ce qui montre qu’on progresse</li>
  <li>comme tous les tests sont conservés on sait que l’on ne travaille pas pour rien</li>
</ul>

<blockquote class="note">
  <p>Toutes ces règles visent à diminuer la peur qui bloque tout progrès</p>
</blockquote>

<h3 id="code">Code</h3>

<p>On va développer petit à petit notre propre application de change en utilisant le TDD. La logique est :</p>

<ul>
  <li>chaque test couvre un petit ajout d’une fonctionnalité</li>
  <li>la première chose à faire sera de (rapidement et salement) faire fonctionner les tests</li>
  <li>toute les modifications de code sont effectuées alors que les testent passent</li>
  <li>le refactoring est fait par petites touches</li>
</ul>

<h2 id="déroulé">Déroulé</h2>

<blockquote class="a-faire">
  <p>Créez un dossier <em>“projet-tdd”</em> qui contiendra votre projet.</p>
</blockquote>

<p>Le déroulé du projet est séparé en trois parties :</p>

<ol>
  <li>
<a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-tdd-1.html">projet : TDD 1/3</a> (introduciton et principes de la méthode en action)</li>
  <li>
<a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-tdd-2.html">projet : TDD 2/3</a> (on s’entraîne)</li>
  <li>
<a href="/cours_informatique/cours/algorithme-code-theorie/code/programmation-objet/projet-tdd-3.html">projet : TDD 3/3</a> (on progresse en utilisant des design pattern)</li>
</ol>

<h2 id="bilan">Bilan</h2>

<p>Cette méthode vous aidera à mieux coder, elle élimine la peur de faire des essais et de modifier le code. En revanche, elle n’est vraiment efficace qu’une fois bien assimilée. Avant, vous allez avoir l’impression de perdre votre temps.</p>

<p>Faire l’effort de maitriser la technique, les effets vous seront bénéfique tout au long de votre vie de code.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cours_informatique/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">cours d'informatique</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">cours d'informatique</li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list"><li><a href="https://github.com/FrancoisBrucker"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#github"></use></svg> <span class="username">FrancoisBrucker</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Support de cours/td d'informatique de François Brucker.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
