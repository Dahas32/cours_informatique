<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Shell | cours d’informatique</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Shell" />
<meta name="author" content="Valentin Defrance" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Support de cours/td d’informatique à l’école centrale marseille. A destination des 1A (tronc commun), des 2A (de l’approfondissement MIE) et des 3A (de l’option digital·e)" />
<meta property="og:description" content="Support de cours/td d’informatique à l’école centrale marseille. A destination des 1A (tronc commun), des 2A (de l’approfondissement MIE) et des 3A (de l’option digital·e)" />
<link rel="canonical" href="/cours_informatique/cours/dfs/le_shell.html" />
<meta property="og:url" content="/cours_informatique/cours/dfs/le_shell.html" />
<meta property="og:site_name" content="cours d’informatique" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Shell" />
<script type="application/ld+json">
{"description":"Support de cours/td d’informatique à l’école centrale marseille. A destination des 1A (tronc commun), des 2A (de l’approfondissement MIE) et des 3A (de l’option digital·e)","@type":"WebPage","headline":"Shell","url":"/cours_informatique/cours/dfs/le_shell.html","author":{"@type":"Person","name":"Valentin Defrance"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cours_informatique/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/cours_informatique/feed.xml" title="cours d'informatique" /><!-- Mathjax Support -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
  
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>

<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/cours_informatique/">cours d&#39;informatique</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/cours_informatique/about"> about </a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Shell</h1>
  </header>

  <div class="post-content">
    <h2 id="quest-ce-que-cest-">Qu’est-ce que c’est ?</h2>

<p>Un <a href="https://fr.wikipedia.org/wiki/Shell_Unix#Shells">shell</a> Unix est un interpréteur de commande destiné aux systèmes d’exploitation Unix et qui permet d’accéder aux fonctionalités internes du système.</p>

<p>Ils existe plusieurs variantes de shell. À l’origine , l’interpréteur de commandes par défaut était sh et à donné naissances à diverse variantes dont csh étendu en tcsh ou ksh ou encore rc… Mais aujourd’hui bash, s’inspirant de sh, ksh, et csh, est le shell le plus répandu, bien qu’il existe d’autres interpréteurs de commandes, comme zsh, ou ash.</p>

<ul>
  <li>sh : Bourne Shell. L’ancêtre de tous les shells.</li>
  <li>bash : Bourne Again Shell. Une amélioration du Bourne Shell, disponible par défaut sous Linux et Mac OS X.</li>
  <li>ksh : Korn Shell. Un shell puissant assez présent sur les Unix propriétaires, mais aussi disponible en version libre, compatible avec bash.</li>
  <li>csh : C Shell. Un shell utilisant une syntaxe proche du langage C.</li>
  <li>tcsh : Tenex C Shell. Amélioration du C Shell.</li>
  <li>zsh : Z Shell. Shell assez récent reprenant les meilleures idées de bash, ksh et tcsh.</li>
</ul>

<p>Nous nous intéresseront plus particulièrement aux shells bash et plus particulièrement à <a href="https://www.debian.org/index.fr.html">Debian</a>. Pour installer Debian, veuillez suivre ces <a href="/cours_informatique/cours/dfs/installation_W10.html">instructions</a>.</p>

<p>Debian est une distribution logicielle libre pour les systèmes informatiques. Debian est un projet collaboratif dont le paquet complet repose sur le noyau système Linux et qui possède plus de 43000 paquets libres prêts à l’emploi.</p>

<h2 id="les-bases">Les Bases</h2>

<ul>
  <li>
    <p>La touche <code class="language-plaintext highlighter-rouge">tab</code> permet l’auto-complétion d’une commande en cours d’écrtiture.</p>
  </li>
  <li>
    <p>Afin de coller une commande du presse-papier dans le Shell, il faut effectuer un clic droit dans celui-ci.</p>
  </li>
  <li>
    <p>La commande <code class="language-plaintext highlighter-rouge">man [commande]</code> permet d’afficher l’aide d’une commande, pour celà il vous faudra probablement installer le paquet manuel au préalable (<code class="language-plaintext highlighter-rouge">sudo apt install man</code> (il faut remplacer <code class="language-plaintext highlighter-rouge">apt</code> par <code class="language-plaintext highlighter-rouge">brew</code> sur Mac)).</p>
  </li>
  <li>La commande <code class="language-plaintext highlighter-rouge">ls</code> permet d’obtenir la liste et les caractéristiques des fichiers contenus dans un répertoire. Si aucun argument n’est donné, la commande “ls” affiche la liste des noms de fichiers du répertoire courant. Cette commande possède plusieurs options (<code class="language-plaintext highlighter-rouge">ls -[Option1][Option2]</code>) permettant d’afficher un résultat différent :
    <ul>
      <li><code class="language-plaintext highlighter-rouge">ls -p</code> : Cette option permet de distinguer les répertoires des fichiers dans le retour de commande en ajoutant <code class="language-plaintext highlighter-rouge">/</code> après le nom de chaque répertoire .</li>
      <li><code class="language-plaintext highlighter-rouge">ls -a</code> : Ajoute à la liste des répertoires les répertoires cachés (ceux dont le nom commence par “<code class="language-plaintext highlighter-rouge">.</code>”)</li>
      <li><code class="language-plaintext highlighter-rouge">ls -l</code> : permet d’afficher une liste détaillée des caractéristiques de chaque fichier du répertoire. Il est d’usage d’ajouter l’option -h à -l afin d’obtenir les informations de poids d’occupation en plus lisible pour un humain plutôt qu’en octet et donc d’utiliser <code class="language-plaintext highlighter-rouge">ls -lh</code>. Avec cette option ls va adapter son affichage en utilisant l’unité la plus adaptée.</li>
      <li><code class="language-plaintext highlighter-rouge">ls -R</code> :	pour récursif, permet d’afficher une liste des caractéristiques de chaque fichier dans tous les répertoires à partir d’où nous sommes.</li>
      <li><code class="language-plaintext highlighter-rouge">ls -lR</code> :	permet d’afficher une liste des caractéristiques de chaque fichier de tous les répertoires à partir d’où nous sommes avec les caractéristiques des droits.</li>
      <li><code class="language-plaintext highlighter-rouge">ls -t</code> :	permet de trier le contenu des répertoires en fonction de la date et non pas en ordre alphabétique. Les fichiers les plus récents sont présentés en premier.</li>
      <li><code class="language-plaintext highlighter-rouge">ls -u</code> :	permet d’employer la date des derniers accès aux fichiers plutôt que la date de modification, autant pour l’affichage (option -l) que pour le tri (option -t).</li>
      <li><code class="language-plaintext highlighter-rouge">ls -d</code> :	permet d’afficher une liste des répertoires sans leur contenu à partir d’où nous sommes.</li>
    </ul>
  </li>
  <li>La commande <code class="language-plaintext highlighter-rouge">echo</code> dans un terminal ou en console, affiche le texte rédigé en argument (voir <a href="https://debian-facile.org/doc:systeme:echo">documentation echo</a>)</li>
</ul>

<h2 id="compte-de-ladministrateur-root">Compte de l’administrateur (root)</h2>

<p>Le compte de l’administrateur (root) ou superutilisateur ou encore utilisateur privilégié permet d’effectuer les opérations d’administration du système suivantes :</p>

<p>lire, écrire et effacer n’importe quel fichier du système quelles que soient ses permissions</p>

<p>Définir l’appartenance et les permissions de n’importe quel fichier du système</p>

<p>définir le mot de passe de n’importe quel utilisateur non-privilégié du système</p>

<p>vous connecter à n’importe quel compte sans mot de passe.</p>

<p>La puissance illimitée du compte de l’administrateur fait que vous devez être attentif et responsable lorsque vous l’utilisez.</p>

<p>sudo : Sudo (Parfois considéré comme l’abréviation de Super-user do) est un programme dont l’objectif de permettre à l’administrateur du système d’autoriser certains utilisateurs à exécuter des commandes en tant que superutilisateur et peut être nécessaire pour l’installations de divers paquets. (ATTENTION : n’utilisez jamais sudo sur une commande dont vous ne connaissez pas les effets)</p>

<h2 id="variables">Variables</h2>

<p>Les <a href="https://linuxize.com/post/how-to-set-and-list-environment-variables-in-linux/">variables</a> sont composées d’un nom et d’une valeur associée. Il existe sous Linux deux principaux types de variables : les variables d’environnement et les variables de shell. Les variables ont le format suivant :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">KEY</span><span class="o">=</span>value
<span class="nv">KEY</span><span class="o">=</span><span class="s2">"Some other value"</span>
<span class="nv">KEY</span><span class="o">=</span>value1:value2
</code></pre></div></div>

<ul>
  <li>Le nom des variable est sensible aux majuscules et aux miniscules, par convention les variables d’environnement ont un nom en majuscule.</li>
  <li>Quand on assigne plusieurs valeurs à une variable, elles doivent être séparées par <code class="language-plaintext highlighter-rouge">:</code></li>
  <li>Il n’y a pas d’espaces avant et après le symbole <code class="language-plaintext highlighter-rouge">=</code></li>
</ul>

<p>Les variables d’environnement sont des variables héritées du système et sont disponible sur tout le système.</p>

<p>Les variables de shell sont des variables qui ne s’appliquent que sur l’instance shell actuelle.</p>

<p>La commande la plus utilisée pour afficher le contenu d’une variable est la commande <code class="language-plaintext highlighter-rouge">printenv</code>, si le nom d’une variable est donné en argument, la commande renverra le contenu de la variable, si aucun argument n’est donné, la commande affichera la liste de toutes les variables d’environnement.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">printenv </span>HOME
</code></pre></div></div>
<p>Output : <code class="language-plaintext highlighter-rouge">/home/username</code></p>

<p>Voici une liste des variables d’environnement les plus courantes :</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">USER</code> L’actuel utilisateur connecté</li>
  <li><code class="language-plaintext highlighter-rouge">HOME</code> Le répertoire principal de l’utilisateur actuel</li>
  <li><code class="language-plaintext highlighter-rouge">SHELL</code> Le chemin vers le shell de l’utilisateur actuel</li>
  <li><code class="language-plaintext highlighter-rouge">LOGNAME</code> Le nom de l’utilisateur actuel</li>
  <li><code class="language-plaintext highlighter-rouge">PATH</code> Une liste des répertoires qui seront cherchés lors de l’exécution d’une commande : lors de l’exécution d’une commande, le système va chercher un exécutable dans ces répertoires (dans l’ordre d’affichage) et va exécuter le premier exécutable trouvé</li>
  <li><code class="language-plaintext highlighter-rouge">LANG</code> Les paramètres locaux actuels</li>
</ul>

<h2 id="navigation-dans-les-répertoires">Navigation dans les répertoires</h2>

<p>La commande <code class="language-plaintext highlighter-rouge">cd</code> (Change Directory) est utilisée pour changer de répertoire de travail, c’est l’une des commandes les plus basiques et l’une des plus fréquemment utilisée.</p>

<p>La commande <code class="language-plaintext highlighter-rouge">cd</code> peut s’utiliser de deux manières différentes. Soit avec un chemin relatif, soit avec un chemin absolu.  Le chemin absolu ou complet débute à la racine (root) du système <code class="language-plaintext highlighter-rouge">/</code>, le chemin relatif démarre au niveau de votre répertoire actuel.</p>

<p>Par exemple, imaginons que je veuille me rendre au répertoire Downloads présent dans mon répertoire username, je peux le faire de manière relative :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>Downloads
</code></pre></div></div>

<p>Je peux aussi m’y rendre de manière absolue :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /home/username/Downloads
</code></pre></div></div>

<p>Compléments :</p>

<ul>
  <li>La commande <code class="language-plaintext highlighter-rouge">pwd</code> permet d’afficher le chemin (path) de votre répertoire de travail actuel.</li>
  <li>Le chemin de votre répertoire de travail est affiché avant le symbole <code class="language-plaintext highlighter-rouge">$</code> sur l’invite de commandes. Le symbole <code class="language-plaintext highlighter-rouge">~</code> représente votre répertoire de travail par défaut, c’est à dire celui dans lequel vous vous retrouverez au démmarage de votre système, de plus la commande <code class="language-plaintext highlighter-rouge">cd</code> sans arguments vous renverra directement dans votre répertoire par défaut. (dans mon cas /home/username)</li>
  <li>Le répertoire actuel est représenté par (<code class="language-plaintext highlighter-rouge">.</code>), le répertoire parent par (<code class="language-plaintext highlighter-rouge">..</code>). Taper <code class="language-plaintext highlighter-rouge">cd ..</code> vous ramènera au répertoire parent de votre répertoire de travail actuel</li>
  <li>La commande <code class="language-plaintext highlighter-rouge">cd -</code> vous ramènera à votre précédant répertoire de travail (en intervertissant les variables PWD et OLDPWD qui sont respectivement votre répertoire de travail et votre précédant répertoire de travail)</li>
  <li>Le caractère <code class="language-plaintext highlighter-rouge">\</code> permet d’ignorer un caractère spécial comme un espace : si un de vos dossier s’appelle “pourquoi pas”, il sera nécessaire de l’écrire “/pourquoi\ pas”</li>
  <li>Appuyer sur <code class="language-plaintext highlighter-rouge">tab</code> après la commande cd permet de lister les répertoires fils disponibles</li>
</ul>

<p>Exemple : cette ligne de commande vous ramène deux répertoires parents en arrière puis au répertoire Downloads</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /../../Downloads
</code></pre></div></div>

<h2 id="installation-de-paquets">Installation de paquets</h2>

<p>Pour installer un paquet, il faut utiliser la commande suivante :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>packageName
</code></pre></div></div>

<p>L’utilisation de sudo est nécessaire afin d’exécuter la commande avec les droits nécessaires pour télécharger le paquet. (Sur Mac, <code class="language-plaintext highlighter-rouge">apt</code> est remplacé par <code class="language-plaintext highlighter-rouge">brew</code>)
Par exemple si nous voulons installer <em>vim</em> qui est une version plus puissante de l’éditeur de texte <em>vi</em>, il faudra entrer la commande :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>vim
</code></pre></div></div>

<h2 id="vim">VIM</h2>

<p>Comme dit précédemment, <a href="https://wiki.debian.org/fr/vim">vim</a> est un éditeur de texte en mode console. Vous pouvez aussi juste afficher le contenu d’un fichier avec la commande <code class="language-plaintext highlighter-rouge">cat /chemin/de/votre/fichier</code> (ou <code class="language-plaintext highlighter-rouge">cat nomDuFichier</code> en chemin relatif). De même avec la commande <code class="language-plaintext highlighter-rouge">vim</code>. Par exemple pour ouvrir le fichier readme.txt de mon répertoire de travail, je dois taper une des deux commandes :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vim readme.txt
vim /home/username/readme.txt
</code></pre></div></div>

<p>Le contenu du fichier est ainsi affiché dans le terminal et il est possible de déplacer le curseur avec les flêches. Cependant il n’est pas possible d’éditer du texte car nous somme dans le mode normal de vim. Pour éditer le texte nous allons devoir passer en mode insertion.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">i</code> : insertion du texte juste avant la position courante du curseur</li>
  <li><code class="language-plaintext highlighter-rouge">I</code> : insertion du texte juste au début de la ligne courante</li>
  <li><code class="language-plaintext highlighter-rouge">a</code> : insertion du texte juste après la position courante du curseur</li>
  <li><code class="language-plaintext highlighter-rouge">A</code> : insertion du texte à la fin de la ligne courante</li>
</ul>

<p>Pour le mode insertion. Il est possible de modifier le texte à peu près comme dans un éditeur de texte graphique. Il ne manque que l’utilisation de la souris.</p>

<p>Pour enregistrer les modifications, il suffit de quitter le mode insertion avec la touche Esc (Echap), puis on tape :</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">:w</code> pour enregistrer</li>
  <li><code class="language-plaintext highlighter-rouge">:q</code> pour quitter</li>
  <li><code class="language-plaintext highlighter-rouge">:wq</code> pour enregistrer et quitter</li>
  <li><code class="language-plaintext highlighter-rouge">:x</code> pour enregistrer et quitter</li>
  <li><code class="language-plaintext highlighter-rouge">:q!</code> ignorer les modifications</li>
</ul>

<h2 id="pipes-et-redirections">Pipes et redirections</h2>

<p>La redirection de sortie <code class="language-plaintext highlighter-rouge">&gt;</code> permet d’indiquer à un processus que tout ce qui devrait aller sur la sortie standard (par défaut, le terminal), doit plutôt être stocké dans un fichier. Par exemple, la commande <code class="language-plaintext highlighter-rouge">echo "Hello World" &gt; salut.txt</code> écrasera le fichier salut.txt pour y écrire “Hello World”. Si ce fichier n’existe pas, il sera alors créé. (on peut remplacer <code class="language-plaintext highlighter-rouge">&gt;</code> par <code class="language-plaintext highlighter-rouge">&gt;&gt;</code> pour ajouter une ligne à la fin du fichier plutôt que de l’écraser).</p>

<p>La redirection d’entrée <code class="language-plaintext highlighter-rouge">&lt;</code> permet d’indiquer à un processus qu’il doit utiliser un fichier comme entrée standard. Par exemple, la commande <code class="language-plaintext highlighter-rouge">cat &lt; salut.txt</code> affichera donc “Hello World” (le contenu du fichier salut.txt) dans la console.</p>

<p>Le caractère pipe est <code class="language-plaintext highlighter-rouge">|</code>, il est le caractère présent sur la touche <code class="language-plaintext highlighter-rouge">6</code> du clavier. Les tubes ou pipes permettent de rediriger directement le canal de sortie d’une commande vers le canal d’entrée d’une autre commande et de créer des chaînes de commandes. Cette fonctionnalité peut permettre par exemple de compresser un fichier, l’envoyer sur un autre ordinateur et le décompresser en une seule ligne de code.</p>

<p>Pour plus d’information concernant les redirections : <a href="https://putaindecode.io/articles/maitriser-les-redirections-shell/">Lien utile</a></p>

<h2 id="cheat-sheet">Cheat-Sheet</h2>

<p>Voici une <a href="/cours_informatique/cours/dfs/shell_cheat_sheet.html">Cheat-Sheet</a> récapitulant la plupart des commandes dont vous aurez besoin.</p>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cours_informatique/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">cours d&#39;informatique</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">cours d&#39;informatique</li><li><a class="u-email" href="mailto:francois.brucker@centrale-marseille.fr">francois.brucker@centrale-marseille.fr</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/FrancoisBrucker"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#github"></use></svg> <span class="username">FrancoisBrucker</span></a></li><li><a href="https://www.twitter.com/p_____p___"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">p_____p___</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Support de cours/td d&#39;informatique à l&#39;école centrale marseille.
A destination des 1A (tronc commun), des 2A (de l&#39;approfondissement MIE) et des 3A (de l&#39;option digital·e)</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
