<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>pratiques de développement | cours d’informatique</title>
<meta name="generator" content="Jekyll v4.2.0">
<meta property="og:title" content="pratiques de développement">
<meta name="author" content="François Brucker">
<meta property="og:locale" content="en_US">
<meta name="description" content="Support de cours/td d’informatique à l’école centrale marseille.">
<meta property="og:description" content="Support de cours/td d’informatique à l’école centrale marseille.">
<link rel="canonical" href="/cours_informatique/cours/algorithmie_code/cours_1_code/2_cours_pratiques_de_developpement.html">
<meta property="og:url" content="/cours_informatique/cours/algorithmie_code/cours_1_code/2_cours_pratiques_de_developpement.html">
<meta property="og:site_name" content="cours d’informatique">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="pratiques de développement">
<script type="application/ld+json">
{"description":"Support de cours/td d’informatique à l’école centrale marseille.","headline":"pratiques de développement","@type":"WebPage","url":"/cours_informatique/cours/algorithmie_code/cours_1_code/2_cours_pratiques_de_developpement.html","author":{"@type":"Person","name":"François Brucker"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cours_informatique/assets/main.css">

  <link rel="stylesheet" href="/cours_informatique/assets/custom.css">
<link type="application/atom+xml" rel="alternate" href="/cours_informatique/feed.xml" title="cours d'informatique">
</head>

<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/cours_informatique/">cours d'informatique</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/cours_informatique/about"> about </a>
        </div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">pratiques de développement</h1>Auteur : <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">François Brucker</span></span>
  </header>

  <div class="post-content">
    <h2 id="introduction">Introduction</h2>

<p>On va implémenter des algorithmes en vrai et en python. On en profitera pour voir toutes les étapes d’un bon code.</p>

<p>On va se concentrer sur 3 points :</p>

<ul>
  <li>on veut que notre code soit juste</li>
  <li>on veut pouvoir le modifier/ajouter des fonctionnalités rapidement</li>
  <li>on veut pouvoir partager notre code avec soit-même dans d’autres projet, son équipe ou le monde)</li>
</ul>

<p>Le langage d’application n’a que peut d’intérêt en soit. On choisit celui qui est le plus adapté à notre but. Ici, on retranscrit de petit algorithmes, le python est idéal.</p>

<p>Écrire du code nécessite ne nombreuses automatisations et aides pour que ce ne soit pas pénible, ne vous privez pas d’outils parce que vous n’avez pas envie d’apprendre de nouvelles choses et que <em>ça suffit bien pour ce que je veux faire</em>. Vous allez au final perdre plus de temps que l’apprentissage initial (ce qui est tarte). Nos allons utiliser <a href="https://code.visualstudio.com/">visual studio code</a> pour nos codes. Il permet de vous donner rapidement de bonnes habitudes de développement.</p>

<h2 id="outils-de-développement">outils de développement</h2>

<h3 id="un-interpréteur-python-qui-fonctionne">un interpréteur python qui fonctionne</h3>

<p>Vous pouvez soit utiliser l’interpréteur de votre système soit l’installer à la main.Une solution courante et pratique est d’installer <a href="https://www.anaconda.com/">Anaconda</a> (voir <a href="/cours_informatique/tutos/python/installation/terminal/2021/08/20/installation-de-python.html">le début de ce tuto</a></p>

<h3 id="interpréteur-python">interpréteur python</h3>

<p>Le langage python n’est qu’une façon parmi d’autres de décrire et d’écrire des algorithmes.</p>

<p>L’interpréteur python est le logiciel qui permet de transcrire le langage python en langage machine exécutable. On accède à l’interpréteur python en exécutant le programme <code class="language-plaintext highlighter-rouge">python3</code> (ou juste <code class="language-plaintext highlighter-rouge">python</code> si vous êtes sous windows) depuis une fenêtre terminal.</p>

<p>Ce programme python est utilisable essentiellement de 2.5 manières en <a href="https://fr.wikipedia.org/wiki/Interface_en_ligne_de_commande">ligne de commande</a> (voir <a href="https://informatique.centrale-marseille.fr/tutos/post/initiation-linux.html">https://informatique.centrale-marseille.fr/tutos/post/initiation-linux.html</a> pour une aide sur le terminal unix, ou <a href="https://www.varonis.com/blog/windows-powershell-tutorials/">https://www.varonis.com/blog/windows-powershell-tutorials/</a> pour le powershell windows) :</p>

<ul>
  <li>on exécute l’application <code class="language-plaintext highlighter-rouge">python3</code> dans un terminal. On est ensuite devant une ligne finissant par <code class="language-plaintext highlighter-rouge">&gt;&gt;&gt;</code>. En tapant une ligne du langage python, elle est exécutée immédiatement, puis est à nouveau affiché les <code class="language-plaintext highlighter-rouge">&gt;&gt;&gt;</code>. Comme chaque ligne est directement exécutée, il est très difficile d’écrire plus d’une ligne de code.</li>
  <li>on exécute la commande <code class="language-plaintext highlighter-rouge">python3 mon_programme.py</code> où <code class="language-plaintext highlighter-rouge">mon_programme.py</code>est un fichier python dans le même dossier que votre terminal (le début de la ligne vous dit où est le terminal)</li>
  <li>
<code class="language-plaintext highlighter-rouge">python3 -m une_bibliothèque_python</code> Utilisé pour exécuter des utilitaires python comme <code class="language-plaintext highlighter-rouge">pip3</code> pour installer un package ou les bibliothèques de tests</li>
</ul>

<p><em>Note Bene</em> : Un terminal est disponible dans la version pro de pycharm : <a href="https://www.jetbrains.com/help/pycharm/working-with-system-console.html">https://www.jetbrains.com/help/pycharm/working-with-system-console.html</a></p>

<h3 id="visual-code-studio-vscode">visual code studio (vscode)</h3>

<p>Nous allons juste nous concentrer sur la partie <a href="https://code.visualstudio.com/docs/python/python-tutorial">python de vscode</a> en créant un projet de test et en utilisant tous les outils mis à notre disposition pour faire du bon code.</p>

<blockquote class="note">
  <p>TBD : <a href="https://www.nextinpact.com/article/44926/visual-studio-code-editeur-credible-pour-publication-et-markdown">https://www.nextinpact.com/article/44926/visual-studio-code-editeur-credible-pour-publication-et-markdown</a></p>
</blockquote>

<h2 id="un-projet-test">un projet test</h2>

<p>On va juste créer un projet vide pour comprendre comment tout ça fonctionne.</p>

<h3 id="fichier-python">fichier python</h3>

<p>Commencez par télécharger l’extension <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">python</a> pour vcs.</p>

<p>Puis on crée notre projet python :</p>

<ol>
  <li>On choisit d’ouvrir un nouveau dossier. Je l’ai appelé <code class="language-plaintext highlighter-rouge">hello</code>
</li>
  <li>dans le tab de gauche (nommé <em>EXPLORER</em>), on clique sur <em>hello</em> pour ouvrir le tab puis <em>clique droit &gt; new file</em> que l’on nomme <em>main.py</em>
</li>
  <li>vscode doit comprendre que c’est du python et vous demande peut-être de :
    <ol>
      <li>choisir un interpréteur : prenez le python3 de votre distribution</li>
      <li>choisir un lint : supprimer la fenêtre de warning, on fera ça plus tard.</li>
      <li>choisir des tests : supprimer la fenêtre de warning, on fera ça plus tard.</li>
    </ol>
  </li>
</ol>

<h3 id="exécution-dun-fichier">exécution d’un fichier</h3>

<p>On écrit <em>main.py</em> :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"bonjour les gens !"</span><span class="p">)</span>

</code></pre></div></div>

<p>Et on sauve. Ou bien on met en route l’autosave (<em>file &gt; autosave</em>)</p>

<p>On peut ensuite exécuter notre code de plusieurs façons :</p>

<ul>
  <li>on clique sur le triangle vert en haut à droite de la fenêtre : une sous-fenêtre apparaît avec marqué <code class="language-plaintext highlighter-rouge">TERMINAL</code> et notre fichier est passé à l’interpréteur python. Chez moi j’ai marqué ça :
    <div class="language-text highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>fbrucker@emma  » /usr/local/bin/python3 "/Users/fbrucker/projets/hello/main.py"
Bonjour les gens !
</code></pre></div>    </div>
  </li>
  <li>on exécute notre fichier via l’interpréteur directement dans un terminal : <code class="language-plaintext highlighter-rouge">python3 main.py</code> (ou <code class="language-plaintext highlighter-rouge">python main.py</code> sous windows). Tout devrait bien se passer si :
    <ol>
      <li>
<code class="language-plaintext highlighter-rouge">python3</code> est reconnu (ou <code class="language-plaintext highlighter-rouge">python</code> sous windows)</li>
      <li>vous êtes bien dans le dossier contenant votre fichier <code class="language-plaintext highlighter-rouge">main.py</code>.</li>
    </ol>
  </li>
</ul>

<h3 id="linter">linter</h3>

<p><a href="/cours_informatique/tutos/editeur/vsc/installation/configuration/python/2021/09/14/vsc-python.html#linter">linting vsc et python</a></p>

<p>Une fois le fichier sauvé, on voit s’il y a des soucis ou pas. Créons en un pour voir si le linter fonctionne :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span> <span class="p">(</span><span class="s">"bonjour les gens !"</span><span class="p">)</span>

</code></pre></div></div>

<p>Une fois le fichier sauvé vous devriez voir que print est souligné en rouge. En passant sa souris dessus on voit pourquoi : <code class="language-plaintext highlighter-rouge">whitespace before '(' pycodestyle(E211)</code></p>

<blockquote>
  <p><strong>Conclusion</strong> : <strong>NE JAMAIS METTRE D’ESPACE APRÈS UN NOM DE FONCTION</strong> c’est mal car on ne sais pas si c’est une fonction ou un nom de variable.</p>
</blockquote>

<p>Vous devriez peut-être aussi avoir la parenthèse de fin souligné en jaune. C’est parce que la dernière ligne de votre fichier n’est pas vide. Si ce n’est pas le cas, c’es que vous avez bien que 2 lignes dans votre fichier, la seconde étant vide.</p>

<h3 id="séparer-code-et-main">séparer code et main</h3>

<p>on va créer deux fichiers, l’un nommé <em>“le_code.py”</em> qui contiendra notre code et l’autre nommé <em>“main.py”</em> qui sera notre programme principal</p>

<p><em>le_code.py</em> :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">bonjour</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">"Bonjour les gens !"</span>

</code></pre></div></div>

<p><em>main.py</em> :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">le_code</span> <span class="kn">import</span> <span class="n">bonjour</span>

<span class="k">print</span><span class="p">(</span><span class="n">bonjour</span><span class="p">())</span>

</code></pre></div></div>

<p>On a importer le nom <code class="language-plaintext highlighter-rouge">bonjour</code> défini dans le fichier <em>“le_code.py”</em> grace à un import. L’autre façon aurait été d’importer juste le fichier code. On aurait alors eu :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">le_code</span>

<span class="n">le_code</span><span class="p">.</span><span class="n">bonjour</span><span class="p">()</span>

</code></pre></div></div>

<p>La notation pointée se lit alors : exécute le nom <code class="language-plaintext highlighter-rouge">bonjour</code> définit dans <em>“le_code”</em>.</p>

<blockquote>
  <p><strong>ATTENTION</strong> : ne jamais jamais jamais utiliser <code class="language-plaintext highlighter-rouge">from le_code import *</code> qui importe tous les noms définis dans <em>“le_code.py”</em>. On ne sais pas vraiment ce qui a été importé en lisant <em>“le_code.py”</em>: notre code n’est pas lisible ! Le gain d’écriture de <code class="language-plaintext highlighter-rouge">*</code> plutôt que <code class="language-plaintext highlighter-rouge">bonjour</code> sera perdu au centuple plus tard lorsque l’on devra chercher dans tous les fichiers du projet où l’on a bien pu définir <code class="language-plaintext highlighter-rouge">bonjour</code>…</p>
</blockquote>

<p>En code comme dans la vie, il faut faire rapidement ce que l’on fait souvent. Comme on va passer plus de temps à lire/comprendre du code qu’à l’écrire, il faut optimiser la lecture et non l’écriture. D’où l’utilisation de nom explicites et on préférera toujours la lisibilité à la rapidité.</p>

<h3 id="tests">tests</h3>

<p><a href="https://code.visualstudio.com/docs/python/testing">tests</a>.</p>

<h4 id="test-des-tests">test des tests</h4>

<p>On y reviendra plus tard et à de nombreuses reprise, les tests sont partie intégrante d’une bonne programmation.</p>

<p>On va juste ici vérifier que tout fonctionne. Il existe de nombreuse bibliothèques de tests possible pour python. Nous allons utiliser <a href="https://docs.pytest.org/en/stable/">pytest</a>. Commençons par l’installer : <code class="language-plaintext highlighter-rouge">pip3 install pytest</code> (ou <code class="language-plaintext highlighter-rouge">pip install pytest</code> sous windows).</p>

<p>Le boulot d’une bibliothèque de test est d’exécuter toutes les fonction commençant par <code class="language-plaintext highlighter-rouge">test_</code> de tous les fichiers commençant par <code class="language-plaintext highlighter-rouge">test_</code> d’un projet.</p>

<p>Les tests sont de petites fonction dont le but est de <em>tester</em> une fonctionnalité du programme( souvent l’exécution d’une fonction). On utilisera l’instruction <a href="https://docs.python.org/fr/3/reference/simple_stmts.html#the-assert-statement">assert</a> pour ces tests : si ce qui est à droite d’assert est juste, le programme continue sans encombre, si c’est faux, le programme plante.</p>

<p>On va donc créer dans notre projet situé dans le dossier <em>hello</em> un fichier nommé <em>test_projet.py</em> qui contiendra :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">test_oui</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">1</span>


<span class="k">def</span> <span class="nf">test_non</span><span class="p">():</span>
    <span class="k">assert</span> <span class="mi">1</span> <span class="o">==</span> <span class="mi">2</span>

</code></pre></div></div>
<blockquote>
  <p><em>*Remarque</em> : le premier test est vrai : <code class="language-plaintext highlighter-rouge">1 == 1</code> est <code class="language-plaintext highlighter-rouge">True</code> donc assert ne va rien faire. Le second va planter car <code class="language-plaintext highlighter-rouge">1== 2</code>va rendre <code class="language-plaintext highlighter-rouge">False</code> et assert va arrêter le programme.</p>
</blockquote>

<p>Vous ne devriez pas avoir de rouge, le linter doit être content :</p>

<ul>
  <li>une ligne vide à la fin</li>
  <li>deux lignes vides entre deux définitions de fonctions</li>
</ul>

<p>Mettons en place nos tests.</p>

<ol>
  <li>dans les préférences (<em>file/code &gt; preferences &gt; settings</em>) tapez <code class="language-plaintext highlighter-rouge">python.testing.pytestEnabled</code>  dans la barre de recherche et cochez la case. Ceci dit à vscode que notre framework de test est pytest (il y en a d’autres possible comme <a href="https://docs.python.org/fr/3.9/library/unittest.html">unittest</a> ou encore <a href="https://nose.readthedocs.io/en/latest/">nosetests</a>, mais on ne va pas les utiliser. Assurez vous cependant qu’un seul framework de test soit utilisé à la fois. Ca devrait être le cas si vous n’avez pas cliqué un peu partout).</li>
  <li>on configure les tests de notre projet en tapant la commande (ctrl/cmd+shift+p) : <em>python : Configure tests</em> on choisit <em>pytest</em> puis <em>. (root)</em> qui donne le dossier de départ où aller chercher nos tests</li>
  <li>On lance nos tests avec soit :
    <ul>
      <li>la commande : <em>Python: Discover Tests</em> puis on clique sur <em>run tests</em> en bas à gauche de la fenêtre (à côté du nom de l’interpréteur), on choisit <em>Run all Tests</em>
</li>
      <li>il y a un petit erlenmeyer dans la colonne de gauche de la fenêtre, c’est les tests. On pet les exécuter tous en cliquant sur les 2 triangles verts dans le tab des tests. Vous pouvez voir le résultat complet en cliquant sur le petit terminal (5ème icône du tab des tests.)</li>
      <li>dans un terminal en tapant <code class="language-plaintext highlighter-rouge">pytest</code> alors que vous êtes dans le dossier du projet.</li>
    </ul>
  </li>
</ol>

<p>Vous devriez voir :</p>
<ul>
  <li>dans le tab des tests qu’un test est vert, l’autre rouge</li>
  <li>le test qui est rouge est marqué dans la sortie complète :
    <div class="language-text highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>          def test_non():
      &gt;       assert 1 == 2
      E       assert 1 == 2
</code></pre></div>    </div>
  </li>
</ul>

<p>Ceci est normal car le but d’assert est de vérifier que ce qui suit est juste. Si c’est le cas il ne se passe rien, si c’est faux le programme s’arrête.</p>

<p>Écrire un test revient à vérifier qu’un comportement d’une fonction est correct (l’<code class="language-plaintext highlighter-rouge">assert</code> est juste) et si le test plante (il est rouge) c’est que l’<code class="language-plaintext highlighter-rouge">assert</code> s’est révélé faux.</p>

<blockquote>
  <p><strong>Attention</strong> : si vous exécutez un fichier de test avec python (essayer en cliquant sur le petit triangle vert lorsque vous êtes sur un fichier de test) il ne va rien se passer. C’est normal car ce fichier n’a pas de commande python, juste des définitions de fonctions.</p>
</blockquote>

<h3 id="test-pour-notre-projet">test pour notre projet</h3>

<p>On va juste faire un test qui vérifie que notre fonction rend bien une chaîne de caractère qui commence par <code class="language-plaintext highlighter-rouge">bonjour</code>. L’usage veut que l’on ait (au moins) un fichier de test par fichier de code, et que l’on nomme ses tests, le nom du fichier testé précédé de <em>test_</em>.</p>

<p><em>test_le_code.py</em> :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">le_code</span> <span class="kn">import</span> <span class="n">bonjour</span>

<span class="k">def</span> <span class="nf">test_bonjour</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">bonjour</span><span class="p">().</span><span class="n">startswith</span><span class="p">(</span><span class="s">'Bonjour'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="tbd">TBD</h2>

<ul>
  <li>voir avec windows si tout va bien. En particulier avec l’invit de commande</li>
</ul>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cours_informatique/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">cours d'informatique</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">cours d'informatique</li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list"><li><a href="https://github.com/FrancoisBrucker"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#github"></use></svg> <span class="username">FrancoisBrucker</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Support de cours/td d'informatique à l'école centrale marseille.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
