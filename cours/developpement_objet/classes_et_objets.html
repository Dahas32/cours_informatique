<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Classes et objets | cours d’informatique</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Classes et objets" />
<meta name="author" content="François Brucker" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Support de cours/td d’informatique à l’école centrale marseille." />
<meta property="og:description" content="Support de cours/td d’informatique à l’école centrale marseille." />
<link rel="canonical" href="/cours_informatique/cours/developpement_objet/classes_et_objets.html" />
<meta property="og:url" content="/cours_informatique/cours/developpement_objet/classes_et_objets.html" />
<meta property="og:site_name" content="cours d’informatique" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Classes et objets" />
<script type="application/ld+json">
{"headline":"Classes et objets","description":"Support de cours/td d’informatique à l’école centrale marseille.","@type":"WebPage","url":"/cours_informatique/cours/developpement_objet/classes_et_objets.html","author":{"@type":"Person","name":"François Brucker"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cours_informatique/assets/main.css">

  <link rel="stylesheet" href="/cours_informatique/assets/custom.css"><link type="application/atom+xml" rel="alternate" href="/cours_informatique/feed.xml" title="cours d'informatique" /><!-- Mathjax Support -->
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
    </script>
</head>

<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/cours_informatique/">cours d&#39;informatique</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/cours_informatique/about"> about </a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Classes et objets</h1></p>Auteur : <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">François Brucker</span></span></p>
  </header>

  <div class="post-content">
    <h2 id="but">But</h2>

<p>On va voir dans cette séance les notions de classe, d’objet, d’attribut et de méthode.</p>

<blockquote>
  <p><strong>Elements de corrigé :</strong> Ils sont disponibles <a href="/cours_informatique/cours/developpement_objet/classes_et_objets_corrige.html">là</a>. Cependant, ils ne dispensent pas d’aller en cours, c’est une aide à la compréhension.</p>
</blockquote>

<h2 id="séance-tableau">Séance tableau</h2>

<p>Le <a href="ressources/TD_1_impression.pdf">sujet au format pdf</a>.</p>

<h2 id="séance-code">Séance code</h2>

<blockquote>
  <p><strong>Warning :</strong> On suppose que vous avez tous fait du python dans votre vie. Si ce n’est pas le cas, faites quelques tutos pour vous mettre en jambe.</p>
</blockquote>

<h3 id="dice">Dice</h3>
<h4 id="un-dé-tout-simple">Un dé tout simple</h4>

<p>Implémentez la première version de la classe <code class="language-plaintext highlighter-rouge">Dice</code> vue dans le TD1 dans un fichier nommé <em>dice.py</em>. Elle doit être capable de :</p>

<ul>
  <li>créer un objet sans paramètre</li>
  <li>créer un objet avec une position initiale</li>
  <li>connaître et changer la position du dé</li>
  <li>lancer le dé</li>
</ul>

<p>Pour vérifier que votre code fait ce qu’on lui demande, vous devez créer un fichier de tests <em>essai_dice.py</em> pour
essayer votre classe. Prenez le temps d’essayer :</p>

<ul>
  <li>de créer un objet sans argument et de vérifier dans quelle position il est,</li>
  <li>de créer un objet en choisissant sa position et de vérifier sa position,</li>
  <li>de modifier la position d’un dé créé et de vérifier qu’elle a bien été changée,</li>
  <li>de lancer le dé et de vérifier que sa position est toujours cohérente avec le nombre de faces.</li>
</ul>

<h4 id="un-dé-pipé">Un dé pipé</h4>

<p>Nous allons maintenant améliorer notre dé avec la deuxième version de la classe vue en TD : le dé pipé. Il faudra donc ajouter un nouvel attribut permettant de renseigner les probabilités de chaque face. On ajoutera ces probabilités en paramètre optionnel à l’initialisation du dé et sous forme de <em>setter/getter</em>.</p>

<p>Pour l’initialisation, ajoutez cet attribut et essayez de créer un nouveau dé en utilisant ce paramètre.</p>

<p>Modifiez la méthode <code class="language-plaintext highlighter-rouge">roll</code> pour prendre en compte les probabilités. Pour lancer le dé au hasard en respectant les probabilités voulues, vous pouvez utiliser <code class="language-plaintext highlighter-rouge">numpy.random.choice</code>. Regardez la <a href="https://numpy.org/doc/stable/reference/random/generated/numpy.random.choice.html">doc</a> pour savoir comment l’utiliser et avec quels paramètres.</p>

<blockquote>
  <p><strong>Nota Bene :</strong>
Pour utiliser numpy, vous devez l’importer en haut de votre fichier avec <code class="language-plaintext highlighter-rouge">import numpy</code>.</p>
</blockquote>

<p>Essayez les nouvelles fonctionnalités:</p>

<ul>
  <li>créer un dé avec une distribution de probabilités particulière,</li>
  <li>changer la distribution de probabilités d’un dé,</li>
  <li>lancer un dé pipé en vérifiant qu’il suit (à peu près) la loi de probabilités donnée.</li>
</ul>

<h3 id="pour-aller-plus-loin">Pour aller plus loin</h3>

<p>Python dispose de méthodes spéciales qui peuvent être invoquées en utilisant une syntaxe particulière (par exemple les
opérations arithmétiques <code class="language-plaintext highlighter-rouge">+, -, *, \</code> entre objets que nous avons créés nous-mêmes). Vous en trouverez une liste
exhaustive sur la <a href="https://docs.python.org/3/reference/datamodel.html#special-method-names">doc officielle</a>. Nous allons
en utiliser ici quelques-unes sur notre classe. Ces méthodes se présentent toujours sous la forme <code class="language-plaintext highlighter-rouge">__nom_de_la_methode__</code>.</p>

<p>Essayez de taper :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">d</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></div></div>

<p>Vous devriez obtenir quelque chose comme :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">dice</span><span class="p">.</span><span class="n">Dice</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x7f40e518a668</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Le <code class="language-plaintext highlighter-rouge">print</code> appelle la méthode <code class="language-plaintext highlighter-rouge">__str__</code> de notre classe. Nous ne l’avons pas définie, c’est donc la méthode par défaut de tous les objets python qui est appelée. Comme vous le constatez, elle n’est pas très intéressante pour nous. Il faut donc la définir dans notre classe.</p>

<p>Définissez une méthode permettant d’écrire le dé comme une chaîne de caractères sous la forme <code class="language-plaintext highlighter-rouge">"Dice(position=1,
probabilities=[1, 0, 0, 0, 0, 0])"</code> et vérifiez qu’elle fonctionne.</p>

<p>On voudrait également pouvoir vérifier si un dé a fait un meilleur lancer qu’un autre en faisant tout simplement :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">d1</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">Dice</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">d1</span> <span class="o">&lt;</span> <span class="n">d2</span>
</code></pre></div></div>

<p>Si vous testez ça avec votre code tel qu’il est, vous obtiendrez :</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">TypeError</span><span class="p">:</span> <span class="s">'&lt;'</span> <span class="ow">not</span> <span class="n">supported</span> <span class="n">between</span> <span class="n">instances</span> <span class="n">of</span> <span class="s">'Dice'</span> <span class="ow">and</span> <span class="s">'Dice'</span>
</code></pre></div></div>

<p>Python vous explique qu’il ne connaît pas l’opérateur <code class="language-plaintext highlighter-rouge">&lt;</code> pour les objets de notre classe. Pour pouvoir utiliser
directement les opérateurs <code class="language-plaintext highlighter-rouge">&lt;</code> et <code class="language-plaintext highlighter-rouge">&gt;</code>, il faut définir respectivement les méthodes <code class="language-plaintext highlighter-rouge">__lt__(self, other)</code> et
<code class="language-plaintext highlighter-rouge">__gt__(self, other)</code>. On pourra aussi ajouter <code class="language-plaintext highlighter-rouge">__eq__(self, other)</code> pour tester l’égalité.</p>

<p>Ajoutez les méthodes <code class="language-plaintext highlighter-rouge">__lt__</code>, <code class="language-plaintext highlighter-rouge">__gt__</code> et <code class="language-plaintext highlighter-rouge">__eq__</code> et testez les.</p>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cours_informatique/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">cours d&#39;informatique</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">cours d&#39;informatique</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/FrancoisBrucker"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#github"></use></svg> <span class="username">FrancoisBrucker</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Support de cours/td d&#39;informatique à l&#39;école centrale marseille.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
