<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>git : les commandes | cours d’informatique</title>
<meta name="generator" content="Jekyll v4.2.0">
<meta property="og:title" content="git : les commandes">
<meta name="author" content="François Brucker">
<meta property="og:locale" content="en_US">
<meta name="description" content="Support de cours/td d’informatique à l’école centrale marseille.">
<meta property="og:description" content="Support de cours/td d’informatique à l’école centrale marseille.">
<link rel="canonical" href="/cours_informatique/cours/git_et_github/git_commands.html">
<meta property="og:url" content="/cours_informatique/cours/git_et_github/git_commands.html">
<meta property="og:site_name" content="cours d’informatique">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="git : les commandes">
<script type="application/ld+json">
{"description":"Support de cours/td d’informatique à l’école centrale marseille.","headline":"git : les commandes","@type":"WebPage","url":"/cours_informatique/cours/git_et_github/git_commands.html","author":{"@type":"Person","name":"François Brucker"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cours_informatique/assets/main.css">

  <link rel="stylesheet" href="/cours_informatique/assets/custom.css">
<link type="application/atom+xml" rel="alternate" href="/cours_informatique/feed.xml" title="cours d'informatique">
</head>

<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/cours_informatique/">cours d'informatique</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/cours_informatique/about"> about </a>
        </div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">git : les commandes</h1>Auteurs :
      <ul>
      
        <li><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">François Brucker</span></span></li>
      
        <li><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Fanis Michalakis</span></span></li>
      
      </ul>
  </header>

  <div class="post-content">
    <h2 id="but">But</h2>

<p>Les indispensables à connaître. Ce tuto comporte deux sections :</p>

<ol>
  <li>La section <a href="#comment-faire-">Comment faire …</a> qui donne la marche à suivre pour les opérations courantes,</li>
  <li>La section <a href="#cheatsheet">Cheatsheet</a>, un tableau récapitulant les commandes les plus utiles et leurs variations (notamment les options qu’il est important de connaître).</li>
</ol>

<p>L’idée est donc de pouvoir utiliser ce tuto de deux façons : soit avec une idée de ce qu’on veut faire, obtenir les différentes commandes à utiliser ; soit pour se rafraichir la mémoire sur une commande bien précise.</p>

<h2 id="comment-faire-">Comment faire …</h2>

<h3 id="clone-projet">Récupérer (cloner) en local un projet existant</h3>

<p><strong>Description :</strong> on souhaite travailler sur un projet donc le code est disponible sur Github (ou équivalent). Pour ce faire, on va cloner le répertoire en local sur sa machine.</p>

<p>C’est aussi la façon la plus simple d’initialiser un projet github. Une fois le <a href="https://docs.github.com/en/get-started/quickstart/create-a-repo">projet crée sur github</a></p>

<p><strong>Commandes :</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone &lt;url&gt;
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&lt;url&gt;</code> sera ce qui est copié depuis la page du projet :</p>

<p><img src="/cours_informatique/assets/cours/git/github-clone-projet.png" alt="usage github"></p>

<p>Et aura deux formes :</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">git@github.com:&lt;USER&gt;/&lt;monprojet&gt;.git</code>. Si vous utilisez cette méthode,vous vous authentifierez avec vos clés ssh.</li>
  <li>par http : <code class="language-plaintext highlighter-rouge">git remote add origin https://github.com/&lt;USER&gt;/&lt;monprojet&gt;.git</code>. Si vous utilisez cette méthode vous vous authentifierez avec un <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">token</a>.</li>
</ul>

<h3 id="initialiser-un-nouveau-projet">Initialiser un nouveau projet</h3>

<p><strong>Description :</strong> on va créer en local notre nouveau projet, créer un répertoire sur GitHub et lier les deux.</p>

<ol>
  <li>Création du répertoire sur Github</li>
  <li>Création du répertoire en local</li>
  <li>Initialisation de git</li>
  <li>La liaison (pas dangereuse)</li>
</ol>

<p><strong>Commandes :</strong></p>

<ol>
  <li>Pour cette première étape, opérez depuis un <a href="https://github.com/new">navigateur</a> (<a href="https://docs.github.com/en/get-started/quickstart/create-a-repo">tuto sur github</a>) :
    <ul>
      <li>donnez un nom à votre répertoire</li>
      <li>choisissez un répertoire public</li>
      <li>vous pouvez ensuite créer le répertoire en cliquant sur le bouton <em>create repository</em>
Une fois le dossier crée, github vous aide pour lier ce répertoire à un projet de votre ordinateur.</li>
    </ul>
  </li>
  <li>
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;là où on veut mettre le dossier&gt;
<span class="nb">mkdir</span> &lt;monprojet&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <div class="language-shell highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> &lt;monprojet&gt;
git init
</code></pre></div>    </div>
  </li>
  <li>si vous voulez vous connecter, il y a deux possibilités :
    <ul>
      <li>par SSH : <code class="language-plaintext highlighter-rouge">git remote add origin git@github.com:&lt;USER&gt;/&lt;monprojet&gt;.git</code>. Si vous utilisez cette méthode,vous vous authentifierez avec vos clés ssh.</li>
      <li>par http : <code class="language-plaintext highlighter-rouge">git remote add origin https://github.com/&lt;USER&gt;/&lt;monprojet&gt;.git</code>. Si vous utilisez cette méthode vous vous authentifierez avec un <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">token</a>.</li>
    </ul>
  </li>
  <li>votre premier push devra aussi définir la branche de l’origin : <code class="language-plaintext highlighter-rouge">git push --set-upstream.origin master</code>. Vous pourrez ensuite utiliser simplement <code class="language-plaintext highlighter-rouge">git push</code>
</li>
</ol>

<h3 id="travailler-à-plusieurs-sur-un-projet">Travailler à plusieurs sur un projet</h3>

<ol>
  <li>on sépare le travail à faire en tâche, et on s’arrange pour les taches à effectuer en même temps soient sur des parties différentes du code. Ceci pour éviter de se marcher sur les pieds et multiplier les conflits de fusion.</li>
  <li>pour coder sa propre tâche, on crée une branche de développement qui lui nous est propre et sur laquelle vous pourrez travailler en local, voir la sauver sur le serveur. Comme vous êtes seul à travailler dessus, vous n’aurez pas de problème de fusion.</li>
  <li>Une fois votre travail fini, vous fusionnerez votre branche local avec la branche principale du serveur distant, qui est souvent la branche master.</li>
  <li>vous pouvez ensuite supprimer la branche qui vous a servi à coder la tâche et recommencer.</li>
</ol>

<h3 id="récupérer-en-local-les-modifications-effectuées-sur-le-répertoire-distant">Récupérer en local les modifications effectuées sur le répertoire distant</h3>

<p><strong>Description :</strong> Sur un projet informatique, il arrive souvent que plusieurs développeurs travaillent de concert (c’est d’ailleurs toute l’utilité d’un logiciel tel que git). Afin de rester syncrhonisé avec le travail des collègues, on est régulièrement amené à télécharger depuis le serveur commun les apports qu’ils y ont déposé.</p>

<p><strong>Commandes :</strong></p>

<p>Depuis la racine du projet (là où se trouve le dossier .git) :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull <span class="nt">--rebase</span><span class="o">=</span>merges
</code></pre></div></div>

<p>En général, l’url peut être trouvée sous le menu “Code” ou “Clone” sur la page principale d’un projet.</p>

<blockquote>
  <p>vous pouvez utiliser juste <code class="language-plaintext highlighter-rouge">git pull</code> si votre stratégie de fusion est placée par défaut à <code class="language-plaintext highlighter-rouge">rebase=merges</code>. dans le doute, utilisez la commande ci-dessus.</p>
</blockquote>

<h3 id="créer-une-nouvelle-branche">Créer une nouvelle branche</h3>

<p><strong>Description :</strong> pour travailler sur un aspect particulier, qu’il s’agisse d’une résolution de bug ou de l’élaboration d’une nouvelle fonctionnalité, on veut créer une nouvelle branche. Cette nouvelle branche va dériver d’une branche-mère (en général, il s’agit de la branche <em>master</em>, aussi appelée <em>main</em>, et ce sera aussi le cas dans notre exemple).</p>

<p><strong>Commandes :</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout master
git branch ma_nouvelle_branche
git checkout ma_nouvelle_branche
</code></pre></div></div>

<p>Ou sous une forme plus condensée :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout master
git checkout <span class="nt">-b</span> ma_nouvelle_branche
</code></pre></div></div>

<p>L’option <code class="language-plaintext highlighter-rouge">-b</code> appliquée à la commande <code class="language-plaintext highlighter-rouge">checkout</code> permet en effet de créer la branche de destination si celle-ci n’existe pas.</p>

<h3 id="pousser-une-branche-nouvelle-locale-sur-le-serveur-distant">Pousser une branche (nouvelle) locale sur le serveur distant</h3>

<p><strong>Description :</strong> on a créé en local une nouvelle branche, qui n’existe pas encore sur le serveur distant. On souhaite créer la branche du même nom sur le serveur distant et pousser nos modifications dessus.</p>

<p><strong>Commandes :</strong></p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout &lt;branche&gt;
git push <span class="nt">--set-upstream</span> origin &lt;branche&gt;
</code></pre></div></div>

<p>Version condensée :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout &lt;branche&gt;
git push <span class="nt">-u</span> origin &lt;branche&gt;
</code></pre></div></div>

<h3 id="pousser-ses-modifications-sur-le-serveur">Pousser ses modifications sur le serveur</h3>

<p><strong>Description :</strong> on veut “enregistrer” les modifications apportées au code et les partager avec ses collaborateurs en les poussant sur le serveur. On peut décomposer la marche à suivre en deux grandes étapes :</p>

<ol>
  <li>On ajoute localement ses modifications à l’historique git, suivant la fréquence qui nous convient le mieux</li>
  <li>On pousse tout ça sur le serveur.</li>
</ol>

<p>La fréquence d’ajout des modifications au git est variable suivant les développeurs. Certains aiment faire un gros ajout (<em>commit</em>) une fois de temps en temps, quand d’autres sont partisans de <em>commits</em> dits atomiques (pour chaque modification), quitte à retravailler ensuite l’historique ensuite pour le rendre plus concis si besoin.</p>

<p>Concernant la fréquence d’envoi sur le serveur (<em>push</em>), la seule règle vraiment importante est de bien avoir en tête que, tant que du code n’est pas poussé, il n’existe que sur votre ordinateur. Et si celui-ci est endommagé ou perdu … Un <em>push</em> régulier est donc gage d’esprit léger !</p>

<p><strong>Commandes :</strong></p>

<ol>
  <li>L’ajout des modifications au git se fait en plusieurs étapes : on ajoute d’abord les modifications qui nous intéressent au <em>stage</em>, puis on les <em>commit</em>. On peut voir le <em>stage</em> comme une sorte de bassine où l’on dépose tous les fichiers que l’on veut sauver.</li>
</ol>

<p>En général, on a pris soin de placer les fichiers qu’on ne veut de toute façon pas voir dans git dans le fichier .gitignore. Donc, souvent, on va vouloir tout ajouter dans le stage pour tout commit :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add <span class="nb">.</span>
git commit <span class="nt">-am</span> <span class="s2">"mon_message_decrivant_le_commit"</span>
</code></pre></div></div>

<p>Si l’on souhaite <em>commit</em> seulement un fichier (ou un groupe de fichiers) :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add fichier1.md fichier2.html
git commit <span class="nt">-am</span> <span class="s2">"mon_message_de_commit"</span>
</code></pre></div></div>

<p><em>Note :</em> <code class="language-plaintext highlighter-rouge">git status</code>est très utile pour voir ce qui est dans le <em>stage</em> et ce qui n’y est pas encore. Abusez-en !</p>

<ol>
  <li>Une fois qu’on a <em>commit</em> nos changements, que tout est testé (mais c’est un autre sujet), etc., on va pouvoir pousser notre code sur le serveur. Rien de plus simple :</li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push
</code></pre></div></div>

<p>Si la branche sur laquelle on travaille existe aussi sur le serveur et que les deux branches sont liées, tout devrait bien se passer. Sinon, c’est qu’on a mal fait <a href="#pousser-une-branche-nouvelle-locale-sur-le-serveur-distant">ça</a>.</p>

<h3 id="fusionner-une-branche">Fusionner une branche</h3>

<p><strong>Description :</strong> on souhaite fusionner une branche dans sa branche d’origine (par exemple <em>master</em>), c’est-à-dire appliquer toutes les modifications portées par une branche dans sa branche d’origine.</p>

<p>Nous proposons ici une méthode consistant à utiliser <code class="language-plaintext highlighter-rouge">git rebase</code> conjointement à <code class="language-plaintext highlighter-rouge">git merge</code> pour obtenir un historique plus “propre” (i.e. plus linéaire). Pour plus détails, voir le tuto sur git rebase.</p>

<p><strong>Commandes :</strong></p>

<p>Pour ne garder aucune trace de la branche (et obtenir ainsi un historique complètement linéaire, plat) :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase master branche
git checkout master
git merge branche
git branch <span class="nt">-d</span> branche
</code></pre></div></div>

<p>Pour conserver une trace de la branche (par exemple parce qu’elle est significante) mais conserver une certaines linéarité (dans l’enchaînement des branches notamment) :</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git rebase master branche
git checkout master
git merge branche <span class="nt">--no-ff</span>
git branch <span class="nt">-d</span> branche
</code></pre></div></div>

<h2 id="cheatsheet">Cheatsheet</h2>

<p>Par ordre alphabétique ;)</p>

<table>
  <thead>
    <tr>
      <th>Commande</th>
      <th>Effet</th>
      <th>Option(s)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git add &lt;fichier&gt;</code></td>
      <td>ajoute des fichiers au stage en vue de les commit</td>
      <td>
<code class="language-plaintext highlighter-rouge">git add .</code> pour ajouter tous les fichiers modifiés</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git branch</code></td>
      <td>affiche les branches existantes (en local, par défaut). La branche actuelle est mise en évidence par un astérisque</td>
      <td>
<code class="language-plaintext highlighter-rouge">-d &lt;branche&gt;</code> supprime la branche <em>branche</em>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git checkout &lt;branche&gt;</code></td>
      <td>change de branche pour aller sur “branche”</td>
      <td>
<code class="language-plaintext highlighter-rouge">-b &lt;nouvelle branche&gt;</code> pour créer une nouvelle branche et s’y placer</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git clone &lt;url&gt;</code></td>
      <td>clone en local un répertoire distant</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git commit</code></td>
      <td>publie les changements dans l’arbre git local</td>
      <td>
<code class="language-plaintext highlighter-rouge">-a</code> commit tous les changements présents dans le stage <br> <code class="language-plaintext highlighter-rouge">-m "mon_message"</code> permet d’écrire le message de commit sans passer par l’éditeur</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git diff</code></td>
      <td>indique les différences entre le dernier commit et ce qui n’est pas encore mis dans le <em>stage</em>
</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git init</code></td>
      <td>initialise git pour le dossier où la commande est lancée</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git log</code></td>
      <td>affiche l’historique git complet du projet</td>
      <td>
<code class="language-plaintext highlighter-rouge">--oneline</code> affiche les commits sous forme condensée pour plus de lisibilité <br> <code class="language-plaintext highlighter-rouge">--graph</code> représentation visuelle de l’arbre (avec les branches éventuelles)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git merge &lt;branche&gt;</code></td>
      <td>applique les modifications portées par “<branche>\" à la branche mère dont elle est issue</branche>
</td>
      <td>
<code class="language-plaintext highlighter-rouge">--no-ff</code> (<em>no fast forward</em>) permet de créer un commit de fusion dans tous les cas, même cas quand la fusion pourrait être résolue trivialement (<em>fast-forward</em>). Utile pour conserver l’historique des branches lors d’un <em>merge</em> suivant un <em>rebase</em>
</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git pull</code></td>
      <td>télécharge en local les modifications présentes sur le serveur (<em>a priori</em> ajoutées par d’autres développeurs)</td>
      <td>
<code class="language-plaintext highlighter-rouge">--rebase=preverse</code> permet de conserver les commits de fusion, utile pour garder une trace de l’existence de certaines branches</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git push</code></td>
      <td>pousse sur le serveur les modifications locales</td>
      <td> </td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git rebase &lt;ici&gt; &lt;branche&gt;</code></td>
      <td>découpe la branche <code class="language-plaintext highlighter-rouge">branche</code> à sa base et la recolle <code class="language-plaintext highlighter-rouge">ici</code>. <code class="language-plaintext highlighter-rouge">ici</code> peut-être le nom d’une branche, auquel cas la branche <code class="language-plaintext highlighter-rouge">branche</code> est recollée à la fin de la branche <code class="language-plaintext highlighter-rouge">ici</code>, ou un numéro de commit. Voir le tuto complet sur rebase.</td>
      <td>X</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git stash</code></td>
      <td>permet de mettre temporairement de côté les modifications en attente de <em>commit</em> afin de revenir au dernier <em>commit</em>. Les modifications ainsi mises de côté peuvent ensuite être réappliqués (éventuellement après que d’autres commits ont été effectués) ou supprimées.</td>
      <td>
<code class="language-plaintext highlighter-rouge">git stash list</code> pour lister les éléments mis de côté <br> <code class="language-plaintext highlighter-rouge">git stash apply</code> pour faire revenir les modifications dans l’espace de travail <br> <code class="language-plaintext highlighter-rouge">git stash clear</code> pour abandonner complètement les modifications mises de côté</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">git status</code></td>
      <td>affiche les fichiers prêts à être <em>commit</em> et ceux qui ne sont pas encore dans le <em>stage</em>
</td>
      <td> </td>
    </tr>
  </tbody>
</table>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cours_informatique/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">cours d'informatique</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">cours d'informatique</li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list"><li><a href="https://github.com/FrancoisBrucker"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#github"></use></svg> <span class="username">FrancoisBrucker</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Support de cours/td d'informatique à l'école centrale marseille.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
