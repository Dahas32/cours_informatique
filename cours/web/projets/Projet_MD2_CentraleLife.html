<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Projet MD2 - Centrale Life | cours d’informatique</title>
<meta name="generator" content="Jekyll v4.2.0">
<meta property="og:title" content="Projet MD2 - Centrale Life">
<meta name="author" content="Marie Le Goué">
<meta property="og:locale" content="en_US">
<meta name="description" content="Support de cours/td d’informatique de François Brucker.">
<meta property="og:description" content="Support de cours/td d’informatique de François Brucker.">
<link rel="canonical" href="/cours_informatique/cours/web/projets/Projet_MD2_CentraleLife.html">
<meta property="og:url" content="/cours_informatique/cours/web/projets/Projet_MD2_CentraleLife.html">
<meta property="og:site_name" content="cours d’informatique">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta property="twitter:title" content="Projet MD2 - Centrale Life">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Marie Le Goué"},"description":"Support de cours/td d’informatique de François Brucker.","headline":"Projet MD2 - Centrale Life","url":"/cours_informatique/cours/web/projets/Projet_MD2_CentraleLife.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/cours_informatique/assets/main.css">

  <link rel="stylesheet" href="/cours_informatique/assets/custom.css">

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link type="application/atom+xml" rel="alternate" href="/cours_informatique/feed.xml" title="cours d'informatique">
</head>

<body>
<header class="site-header" role="banner">

  <div class="wrapper">
<a class="site-title" rel="author" href="/cours_informatique/">cours d'informatique</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger">
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewbox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"></path>
            </svg>
          </span>
        </label>

        <div class="trigger">
            <a class="page-link" href="/cours_informatique/about"> about </a>
        </div>
      </nav>
</div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Projet MD2 - Centrale Life</h1>Auteurs :
      <ul>
      
        <li><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Marie Le Goué</span></span></li>
      
        <li><span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Alexandre Menasria</span></span></li>
      
      </ul>
  </header>

  <div class="post-content">
    <p><img src="../../../assets/projets/CentraleLife/centrale_life.png" alt="Logo Centrale Life"></p>

<p>Centrale Life est un jeu de plateau inspiré de la vie centralienne. On peut y jouer en multijoueur grâce à un websocket.</p>

<h2 id="technologies-utilisées">Technologies utilisées</h2>

<h3 id="vuejs">Vue.js</h3>

<p>La partie front du projet est en <a href="https://vuejs.org/">Vue.js</a>.
Vue.js est un framework JavaScript utilisé pour construire des interfaces utilisateur et des applications web monopages.</p>

<h4 id="créer-un-projet-en-vue">Créer un projet en Vue</h4>

<p>Il y a plusieurs façons d’intégrer Vue à son projet :</p>
<ul>
  <li><a href="https://vuejs.org/v2/guide/installation.html#CDN">CDN</a></li>
  <li><a href="https://vuejs.org/v2/guide/installation.html#NPM">NPM</a></li>
  <li><a href="https://vuejs.org/v2/guide/installation.html#CLI">CLI</a></li>
</ul>

<p>Pour ce projet, nous avons fait une application Vue CLI.
Pour pouvoir en faire une, il faut <a href="https://cli.vuejs.org/guide/installation.html">installer Vue sur votre ordinateur</a>.
Pour <a href="https://cli.vuejs.org/guide/creating-a-project.html#vue-create">créer le projet</a>, il faut exécuter :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vue create nameProject
</code></pre></div></div>

<h3 id="nodejs-et-express">Node.js et Express</h3>

<p>La partie back en <a href="https://nodejs.org/en/">Node.js</a> avec le framework <a href="https://expressjs.com/fr/">Express</a>.
Node.js est un environnement d’exécution permettant d’utiliser le JavaScript côté serveur.
Express est un framework pour construire des applications avec Node.js.</p>

<h4 id="créer-un-projet-express">Créer un projet Express</h4>

<p>Une fois <a href="https://nodejs.org/en/">Node.js</a> installé, vous pouvez créer un projet Express en faisant :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir myapp     # Création du dossier de votre projet
cd my app       # Aller dans ce dossier
npm init        # Création du package.json
</code></pre></div></div>

<p>Le entry point est généralement index.js ou server.js dans notre cas.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install express --save  # Installation d'Express
</code></pre></div></div>

<p><a href="https://expressjs.com/fr/starter/installing.html">En savoir plus</a></p>

<h3 id="la-particularité-de-notre-projet--les-websocket">La particularité de notre projet : les Websocket</h3>

<p>Pour faire simple, le protocole HTTP est unidirectionnel, c’est-à-dire que le transfert de données se fait uniquement dans un sens et pas dans les deux sens en même temps.
Le protocole HTTP marche sur un modèle de requête - réponse.</p>

<p><em>Exemple</em> <br>
Le serveur envoie des données au client (ordinateur, téléphone …), puis va attendre la réponse du client pour faire autre chose.</p>

<p>Le websocket est bidirectionnel, c’est-à-dire que le transfert de données peut se faire dans les deux sens en même temps.
Ainsi, le serveur peut envoyer des informations de lui-même sans que le client les demande et inversement.</p>

<p><em>Exemple</em> <br>
Lorsque vous recevez un message, c’est le serveur qui vous envoie de lui-même cette information même si vous ne l’avez pas demandé.</p>

<p><a href="https://www.ionos.fr/digitalguide/sites-internet/developpement-web/quest-ce-que-le-websocket/">En savoir plus</a></p>

<p>Pour le websocket, nous avons utilisé <a href="https://socket.io/">Socket.IO</a>.
Socket.IO est une librairie permettant une communication en temps réel, bidirectionnelle et basée sur des événements entre le navigateur et le serveur.</p>

<p>Par exemple, pour notre jeu, nous envoyons les événements suivants :</p>
<ul>
  <li>Un nouveau joueur a rejoint la partie.</li>
  <li>J’ai lancé les dés.</li>
  <li>J’ai fait un choix.</li>
  <li>J’ai mis à jour les données du jeu.</li>
</ul>

<p>Voici le schéma pour le lancer de dés :</p>

<p><img src="../../../assets/projets/CentraleLife/websocket.png" alt="Fonctionnement du websocket"></p>

<p>Pour l’installer :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install socket.io
</code></pre></div></div>

<blockquote>
  <p><strong>Intéressant :</strong> <br>
Le <a href="https://fr.wikipedia.org/wiki/Hypertext_Transfer_Protocol/2">HTTP/2</a> permet de remplir quelques fonctionnalités du Websocket, notamment la possibilité au serveur
d’envoyer au client des données nécessaires mais qu’il n’a pourtant pas demandé.</p>
</blockquote>

<h3 id="test">Test</h3>

<h4 id="test-unitaire">Test unitaire</h4>

<p>Les tests unitaires permettent de tester des fonctions et de vérifier qu’elles renvoient bien ce qu’il faut.</p>

<p>Pour cela, nous utilisons <a href="https://jestjs.io/">Jest</a>. Pour l’installer :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev jest
</code></pre></div></div>

<blockquote>
  <p><strong>Pourquoi <em>–save-dev</em> et pas juste <em>–save</em> ?</strong> <br>
<em>–save-dev</em> va installer cette dépendance en tant que devDependencies, c’est-à-dire uniquement dans un environnement de développement.
En environnement de production, on exécutera <code class="language-plaintext highlighter-rouge">npm install --production</code>. Cette dépendance ne sera donc pas installée.
En effet, on ne fait pas de test en environnement de production.</p>
</blockquote>

<p>Il est possible de faire des <a href="https://socket.io/docs/v4/testing/#example-with-jest">tests avec jest</a> sur les websockets.</p>

<p>Dans utils.js, nous avons des fonctions que nous n’exportons pas.
Pour pouvoir tout de même les tester, nous utilisons <a href="https://github.com/jhnns/rewire">Rewire</a>.</p>

<p>Cependant, pour notre projet Vue, nous utilisons le package <a href="https://github.com/speedskater/babel-plugin-rewire">babel-plugin-rewire</a> qui s’inspire de Rewire.</p>

<p>Pour l’installer :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install babel-plugin-rewire --save-dev
</code></pre></div></div>
<p><a href="https://www.samanthaming.com/journal/2-testing-non-exported-functions/#non-export-function">En savoir plus</a></p>

<p>Pour lancer les tests, il faut exécuter :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm test
</code></pre></div></div>

<h4 id="user-story">User story</h4>

<p>Les user stories sont des petites histoires qui décrivent une utilisation possible du site.
Cela permet de tester si une suite d’actions est possible.</p>

<p>Pour cela, nous avons utilisé <a href="https://www.selenium.dev/documentation/">selenium</a>.</p>

<p>Comme Selenium va utiliser notre site, il lui faut un navigateur web :</p>
<ul>
  <li>
<code class="language-plaintext highlighter-rouge">geckodriver</code> pour Firefox</li>
  <li>
<code class="language-plaintext highlighter-rouge">chromedriver</code> pour Chrome</li>
</ul>

<blockquote class="attention">
  <p>Pour les fichiers avec des users stories, il est important de les appeler <em>nomdufuchier.user-story.js</em>.</p>
</blockquote>

<p>Pour les installer :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install --save-dev selenium-webdriver chromedriver geckodriver
</code></pre></div></div>

<p>Il y a trois tests :</p>
<ul>
  <li>create room : pour vérifier si la création de salle est possible</li>
  <li>roll dice : pour vérifier si le lancer de dés est possible</li>
  <li>play game : après avoir lancé les dés, on clique sur le bouton ok</li>
</ul>

<p>Pour lancer ces tests :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm test -- --testRegex="user-story.js"
</code></pre></div></div>

<blockquote>
  <p><strong>Pourquoi pas <em>npm test</em> comme pour les tests unitaires ?</strong> <br>
Justement, on vous a dit que les fichiers devaient s’appeler <em>nomdufuchier.user-story.js</em>.
<em>npm test</em> va lancer les tests unitaires avec jest (qui termine par .test.js).
<em>–testRegex=”user-story.js”</em> va donc filtrer les fichiers terminant par <em>user-story.js</em>.</p>
</blockquote>

<h2 id="le-jeu">Le jeu</h2>

<h3 id="le-plateau-du-jeu">Le plateau du jeu</h3>

<p>Le plateau du jeu est constitué de 40 cases.
Les joueurs ainsi que leurs soldes sont visibles à droite du plateau.</p>

<p>Le centre du plateau donne les informations du jeu : qui joue ? que doit-il faire ? quel choix peut-il faire ? …</p>

<p>Les règles du jeu sont disponibles en cliquant sur le bouton <strong>Règles du jeu</strong>.</p>

<p>Quand un joueur est en faillite (c’est-à-dire quand il n’a plus assez d’argent pour payer une taxe ou un loyer), il est éliminé. Le but du jeu est d’être la dernière personne à ne pas être en faillite.</p>

<p><img src="../../../assets/projets/CentraleLife/plateau.png" alt="Plateau"></p>

<h3 id="améliorations-possibles-du-jeu">Améliorations possibles du jeu</h3>

<p>Pour améliorer ce jeu, nous avons plusieurs idées :</p>
<ul>
  <li>une interface admin qui permet de gérer les différentes salles</li>
  <li>l’ajout de maisons et d’hôtels</li>
  <li>lorsque l’on a plusieurs calanques ou compagnies, le loyer change (exemple : le loyer est proportionnel au nombre de calanques que possède la personne.)</li>
  <li>la possibilité d’hypothéquer les propriétés pour récupérer de l’argent</li>
  <li>un mode nuit avec des règles différentes (vol, cambriolage de maisons, agression …)</li>
</ul>

<h2 id="conclusion-du-projet">Conclusion du projet</h2>

<p>Ce projet a été l’occasion pour nous de découvrir Vue et plus généralement de faire un projet avec les technos à la mode :
Vue, Node, Express. Cela nous a permis d’apprendre des concepts et de coder différement.
Les Websockets sont compliqués à mettre en place, il vaut mieux faire directement l’architecture du projet avec les websockets
plutot que de les ajouter après.</p>

<h2 id="comment-on-y-joue-">Comment on y joue ?</h2>

<p>Vous pouvez aller sur nos sites <a href="http://node.sauge.ovh1.ec-m.fr/">Sauge</a> et <a href="http://node.marjolaine.ovh1.ec-m.fr">Marjolaine</a> ou vous pouvez installer le projet en local.</p>

<h3 id="installer-le-projet">Installer le projet</h3>

<p>Vous pouvez retrouver le code source du projet sur <a href="https://github.com/amenasria/CentraleLife">ce github</a>.</p>

<p>Pour cloner le projet, vous pouvez faire :</p>
<ul>
  <li>en HTTPS :
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone https://github.com/amenasria/CentraleLife.git
</code></pre></div>    </div>
  </li>
  <li>en SSH :
    <div class="language-plaintext highlighter-rouge">
<div class="highlight"><pre class="highlight"><code>git clone git@github.com:amenasria/CentraleLife.git
</code></pre></div>    </div>
  </li>
</ul>

<p>Une fois que vous avez recupérer le code source, il faut exécuter les commandes suivantes :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install    # Installation des dépendances du backend
cd front
npm install    # Installation des dépendances du frontend
</code></pre></div></div>

<h3 id="lancer-le-projet-en-mode-développement">Lancer le projet en mode développement</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node server.js    # Lancer le backend
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd front
npm run serve     # Démarrer un serveur de développement pour le projet Vue
</code></pre></div></div>

<h3 id="lancer-le-projet-en-production">Lancer le projet en production</h3>

<p>Compiler le projet Vue dans le dossier ./front/dist :</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd front
npm run build
</code></pre></div></div>

<blockquote>
  <p><strong>Pourquoi <em>npm run serve</em> en développement et <em>npm run build</em> en production ?</strong> <br>
<em>npm run serve</em> compile le projet Vue à chaque fois que le code est modifié.
En production, le code n’est pas censé changer. Il ne faut donc le compiler qu’une fois : lorsqu’on fait <em>npm run build</em>.</p>
</blockquote>

<p>N’oubliez pas de décommenter la ligne app.use… dans le serve.js qui indique au site d’utiliser le dossier front/dist.</p>

<p>Ensuite :</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node server.js
</code></pre></div></div>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/cours_informatique/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">cours d'informatique</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">cours d'informatique</li>
</ul>
      </div>

      <div class="footer-col footer-col-2">
<ul class="social-media-list"><li><a href="https://github.com/FrancoisBrucker"><svg class="svg-icon"><use xlink:href="/cours_informatique/assets/minima-social-icons.svg#github"></use></svg> <span class="username">FrancoisBrucker</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Support de cours/td d'informatique de François Brucker.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
